{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/_accounting/actions/index.js","webpack:///./src/_accounting/table/index.js","webpack:///./src/_header/header/index.js","webpack:///./src/_header/theme-mod/index.js","webpack:///./src/_invoice/actions/index.js","webpack:///./src/_invoice/date/index.js","webpack:///./src/_invoice/duedate/index.js","webpack:///./src/_invoice/invoice-number/index.js","webpack:///./src/_invoice/meta/index.js","webpack:///./src/_invoice/paymentinformation/index.js","webpack:///./src/_invoice/table/index.js","webpack:///./src/_quote/actions/index.js","webpack:///./src/_quote/date/index.js","webpack:///./src/_quote/information/index.js","webpack:///./src/_quote/meta/index.js","webpack:///./src/_quote/table/index.js","webpack:///./src/_quote/validuntildate/index.js","webpack:///./src/functions.js","webpack:///./src/index.js","webpack:///external {\"this\":[\"wp\",\"blockEditor\"]}","webpack:///external {\"this\":[\"wp\",\"blocks\"]}","webpack:///external {\"this\":[\"wp\",\"components\"]}","webpack:///external {\"this\":[\"wp\",\"data\"]}","webpack:///external {\"this\":[\"wp\",\"element\"]}","webpack:///external {\"this\":[\"wp\",\"i18n\"]}","webpack:///external {\"this\":[\"wp\",\"serverSideRender\"]}"],"names":["registerBlockType","title","sprintf","__","icon","category","supports","inserter","reusable","html","getEditWrapperProps","edit","withSelect","select","postModifiedDate","getEditedPostAttribute","props","minHeight","Date","toLocaleString","save","updateTotals","attributes","currency","type","default","locale","amountTotalEarnings","amountTotalExpenses","amountTaxEarnings","amountTaxExpenses","clientId","getBlocksByClientId","globalDataBilly","childBlocks","innerBlocks","sort","a","b","date","className","setAttributes","amountEarningsSum","amountExpensesSum","amountTaxEarningsSum","amountTaxExpensesSum","length","forEach","childBlock","Number","earning","expense","tax","width","formatNumber","borderTop","parent","index","quarter","reference","description","postUUID","postTitle","postLink","postType","getBlockRootClientId","getBlockIndex","rootClientId","i","toISOString","substring","getQuarter","reOrder","dispatch","moveBlockToPosition","updateQuarter","val","updateDate","updateReference","updateDescription","updateEarning","updateExpense","updateTax","charAt","toUpperCase","minWidth","wpAdmin","themeMod","updateThemeMod","themeModOptions","label","text","updateLabel","updateInput","amountSubtotal","amountTotal","taxRates","taxRatesTotal","amountSubtotalSum","amountTotalSum","taxRatesTotalSum","taxRatesHolderOutput","taxRatesMergedOutput","map","amount","percentToDecimal","taxRate","push","reduce","res","value","toFixed","JSON","stringify","parse","total","display","amountIncl","quantity","quantityRate","taxOptions","updateAmountIncl","setTimeout","document","getElementById","click","updateTaxRate","updateAmount","updateQuantity","updateQuantityRate","getCurrency","l","undefined","parseFloat","d","q","Math","floor","getMonth"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/**\n * Accounting Actions\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport {\n\tregisterBlockType,\n} from '@wordpress/blocks';\nimport {\n\t__,\n\t_n,\n\tsprintf\n} from '@wordpress/i18n';\nimport {\n\twithSelect,\n} from '@wordpress/data';\n\n\nregisterBlockType( 'billy-blocks/accounting-actions', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Accounting', 'billy' ), __( 'Actions', 'billy' ) ),\n\ticon: 'menu-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: withSelect( ( select ) => {\n\t\treturn {\n\t\t\tpostModifiedDate: select( 'core/editor' ).getEditedPostAttribute( 'modified' ),\n\t\t};\n\t} )( props => {\n\t\tconst {\n\t\t\tpostModifiedDate,\n\t\t} = props;\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<div className=\"components-placeholder\" style={ { minHeight: 'auto' } }>\n\t\t\t\t<small>\n\t\t\t\t\t{\n\t\t\t\t\t\tsprintf( __( '%1$s: %2$s', 'billy' ), __( 'Last modified', 'billy' ), new Date( postModifiedDate ).toLocaleString() )\n\t\t\t\t\t}\n\t\t\t\t</small>\n\t\t\t</div>\n\t\t);\n\t} ),\n\n\tsave: props => {\n\t\treturn null;\n\t},\n} );\n","/**\n * Accounting Table\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport {\n\tregisterBlockType,\n} from '@wordpress/blocks';\nimport {\n\t__,\n\t_n,\n\tsprintf\n} from '@wordpress/i18n';\nimport {\n\tInspectorControls,\n\tInnerBlocks,\n\tRichText,\n} from '@wordpress/blockEditor';\nimport {\n\tPanelBody,\n\tTextControl,\n\tDatePicker, // https://developer.wordpress.org/block-editor/components/date-time\n} from '@wordpress/components';\nimport {\n\tdispatch,\n\twithSelect,\n} from '@wordpress/data';\nimport {\n\tRawHTML,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\n\nimport {\n\tgetQuarter,\n\tformatNumber,\n} from '../../functions';\n\nvar updateTotals;\n\n/**\n * 1. Outer Block\n */\n\nregisterBlockType( 'billy-blocks/accounting-table', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Accounting', 'billy' ), __( 'Table', 'billy' ) ),\n\ticon: 'menu-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tattributes: {\n\t\tcurrency: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tlocale: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountTotalEarnings: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountTotalExpenses: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountTaxEarnings: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountTaxExpenses: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: withSelect( ( select, { clientId } ) => {\n\t\tconst { getBlocksByClientId } = select( 'core/block-editor' );\n\n\t\tglobalDataBilly.clientId = clientId;\n\n\t\t// Get child blocks\n\t\tconst childBlocks = getBlocksByClientId( clientId )[ 0 ].innerBlocks;\n\n\t\t// Sort array based on date attribute\n\t\tchildBlocks.sort( ( a, b ) => {\n\t\t\treturn new Date( a.attributes.date ) - new Date( b.attributes.date )\n\t\t} );\n\n\t\treturn {\n\t\t\tchildBlocks: childBlocks,\n\t\t};\n\t} )( props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tchildBlocks,\n\t\t\tattributes: {\n\t\t\t\tcurrency,\n\t\t\t\tlocale,\n\t\t\t\tamountTotalEarnings,\n\t\t\t\tamountTotalExpenses,\n\t\t\t\tamountTaxEarnings,\n\t\t\t\tamountTaxExpenses,\n\t\t\t},\n\t\t\tsetAttributes,\n\t\t} = props;\n\n\t\t//console.log(childBlocks);\n\t\tsetAttributes( { currency: globalDataBilly.currency } );\n\t\tsetAttributes( { locale: globalDataBilly.locale } );\n\n\t\t// Calculate values and update attributes\n\t\tupdateTotals = () => {\n\t\t\tvar amountEarningsSum = 0,\n\t\t\t\tamountExpensesSum = 0,\n\t\t\t\tamountTaxEarningsSum = 0,\n\t\t\t\tamountTaxExpensesSum = 0;\n\n\t\t\tif ( childBlocks && childBlocks.length > 0 ) {\n\t\t\t\tchildBlocks.forEach( ( childBlock ) => {\n\t\t\t\t\tamountEarningsSum += Number( childBlock.attributes.earning );\n\t\t\t\t\tamountExpensesSum += Number( childBlock.attributes.expense );\n\n\t\t\t\t\tif ( childBlock.attributes.earning ) {\n\t\t\t\t\t\tamountTaxEarningsSum += Number( childBlock.attributes.tax );\n\t\t\t\t\t}\n\t\t\t\t\tif ( childBlock.attributes.expense ) {\n\t\t\t\t\t\tamountTaxExpensesSum += Number( childBlock.attributes.tax );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tsetAttributes( { amountTotalEarnings: amountEarningsSum } );\n\t\t\tsetAttributes( { amountTotalExpenses: amountExpensesSum } );\n\n\t\t\tsetAttributes( { amountTaxEarnings: amountTaxEarningsSum } );\n\t\t\tsetAttributes( { amountTaxExpenses: amountTaxExpensesSum } );\n\t\t}\n\t\tupdateTotals();\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Actions', 'billy' ) }>\n\t\t\t\t\t\t<button id=\"updatetotals\" className=\"components-button is-secondary is-button is-small\" onClick={ updateTotals }>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t__( 'Update Totals', 'billy' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t\n\t\t\t\t<div className={ 'accountingtable-block' + ( className ? ' ' + className : '' ) }>\n\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\ttemplateLock={ false }\n\t\t\t\t\t\ttemplate={ [\n\t\t\t\t\t\t\t[ 'billy-blocks/accounting-tablerow', {\n\t\t\t\t\t\t\t\t//placeholder: 'Enter content…',\n\t\t\t\t\t\t\t} ],\n\t\t\t\t\t\t] }\n\t\t\t\t\t\tallowedBlocks={ [\n\t\t\t\t\t\t\t'billy-blocks/accounting-tablerow',\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\n\t\t\t\t\t<table className=\"totals\">\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tamountTotalEarnings > 0 &&\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t<tr className=\"earnings\">\n\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Earnings', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTotalEarnings, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tamountTotalExpenses > 0 &&\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t<tr className=\"expenses\">\n\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Expenses', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTotalExpenses, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t( amountTotalEarnings > 0 || amountTotalExpenses > 0 ) &&\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t<tr className=\"profit\">\n\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Profit', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td style={ { borderTop: '2px solid' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( ( amountTotalEarnings - amountTotalExpenses ), locale ) )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t( amountTaxEarnings > 0 || amountTaxExpenses > 0 ) &&\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<tr className=\"taxes-earnings\">\n\t\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ sprintf( __( 'Taxes (%s)', 'billy' ), __( 'Earnings', 'billy' ) ) }\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTaxEarnings, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t<tr className=\"taxes-expenses\">\n\t\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ sprintf( __( 'Taxes (%s)', 'billy' ), __( 'Expenses', 'billy' ) ) }\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTaxExpenses, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t} ),\n\n\tsave: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tcurrency,\n\t\t\t\tlocale,\n\t\t\t\tamountTotalEarnings,\n\t\t\t\tamountTotalExpenses,\n\t\t\t\tamountTaxEarnings,\n\t\t\t\tamountTaxExpenses,\n\t\t\t},\n\t\t} = props;\n\n\t\treturn (\n\t\t\t<div className={ 'alignwide' + ( className ? ' ' + className : '' ) }>\n\t\t\t\t<table className=\"table wp-block-table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th scope=\"col\" className=\"sort\" data-sort=\"index\">\n\t\t\t\t\t\t\t\t{ __( '#', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\" className=\"sort\" data-sort=\"date\">\n\t\t\t\t\t\t\t\t{ __( 'Date', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\" className=\"sort\" data-sort=\"description\">\n\t\t\t\t\t\t\t\t{ __( 'Description', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\" className=\"sort\" data-sort=\"reference\">\n\t\t\t\t\t\t\t\t{ __( 'Reference', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\" className=\"sort earnings\" data-sort=\"earning\">\n\t\t\t\t\t\t\t\t{ __( 'Earning', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\" className=\"sort expenses\" data-sort=\"expense\">\n\t\t\t\t\t\t\t\t{ __( 'Expense', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\" className=\"sort\" data-sort=\"tax\">\n\t\t\t\t\t\t\t\t{ __( 'Tax', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody className=\"list\">\n\t\t\t\t\t\t<InnerBlocks.Content />\n\t\t\t\t\t</tbody>\n\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t( amountTotalEarnings > 0 || amountTotalExpenses > 0 ) &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"4\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t{ sprintf( __( '%1$s / %2$s', 'billy' ), __( 'Earnings', 'billy' ), __( 'Expenses', 'billy' ) ) }\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"sum earnings\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTotalEarnings, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"sum expenses\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTotalExpenses, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t( amountTotalEarnings > 0 || amountTotalExpenses > 0 ) &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"4\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Profit', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"2\" className=\"profit\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( ( amountTotalEarnings - amountTotalExpenses ), locale ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t( amountTaxEarnings > 0 || amountTaxExpenses > 0 ) &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"4\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t{ sprintf( __( '%1$s (%2$s / %3$s)', 'billy' ), __( 'Taxes', 'billy' ) , __( 'Earnings', 'billy' ), __( 'Expenses', 'billy' ) ) }\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"sum tax-earnings\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTaxEarnings, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"sum tax-expenses\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTaxExpenses, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</tfoot>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t},\n} );\n\n\n/**\n * 2. Inner Block\n */\n\nregisterBlockType( 'billy-blocks/accounting-tablerow', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Accounting', 'billy' ), __( 'Table Row', 'billy' ) ),\n\ticon: 'menu-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tparent: [ 'billy-blocks/accounting-table' ], // Only allow in outer block\n\tattributes: {\n\t\tindex: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '0',\n\t\t},\n\t\tcurrency: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tlocale: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tdate: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tquarter: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\treference: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tdescription: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tearning: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\texpense: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\ttax: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tpostUUID: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tpostTitle: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tpostLink: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tpostType: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: withSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockIndex,\n\t\t} = select( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tclientId: clientId,\n\t\t\trootClientId: getBlockRootClientId( clientId ),\n\t\t\ti: getBlockIndex( clientId, getBlockRootClientId( clientId ) ) + 1,\n\t\t}\n\t} )( props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tclientId,\n\t\t\trootClientId,\n\t\t\ti,\n\t\t\tattributes: {\n\t\t\t\tindex,\n\t\t\t\tcurrency,\n\t\t\t\tlocale,\n\t\t\t\tdate,\n\t\t\t\tquarter,\n\t\t\t\tdescription,\n\t\t\t\tearning,\n\t\t\t\texpense,\n\t\t\t\ttax,\n\t\t\t\treference,\n\t\t\t\tpostUUID,\n\t\t\t\tpostTitle,\n\t\t\t\tpostLink,\n\t\t\t\tpostType,\n\t\t\t},\n\t\t\tsetAttributes,\n\t\t} = props;\n\n\t\tsetAttributes( { index: i } );\n\t\tsetAttributes( { currency: globalDataBilly.currency } );\n\t\tsetAttributes( { locale: globalDataBilly.locale } );\n\n\t\tif ( '' === date ) {\n\t\t\tsetAttributes( { date: new Date().toISOString().substring( 0, 10 ) } ); // Current date\n\t\t\tsetAttributes( { quarter: getQuarter( new Date().toISOString().substring( 0, 10 ) ) } ); // Current date\n\t\t}\n\n\t\tconst reOrder = () => {\n\t\t\t// Reorder by date (move up/down): see \"childBlocks.sort()\"\n\t\t\tdispatch( 'core/block-editor' ).moveBlockToPosition( clientId, rootClientId, rootClientId, i );\n\t\t}\n\n\t\tconst updateQuarter = val => {\n\t\t\t// Get quarter from datestring\n\t\t\tsetAttributes( { quarter: Number( getQuarter( val ) ) } );\n\t\t};\n\n\t\tconst updateDate = val => {\n\t\t\t//console.log( val );\n\t\t\tsetAttributes( { date: val } );\n\n\t\t\t// Get quarter from datestring\n\t\t\tupdateQuarter( val );\n\n\t\t\treOrder();\n\t\t};\n\n\t\tconst updateReference = val => {\n\t\t\tsetAttributes( { reference: val } );\n\t\t}\n\n\t\tconst updateDescription = val => {\n\t\t\tsetAttributes( { description: val } );\n\t\t}\n\n\t\tconst updateEarning = val => {\n\t\t\tsetAttributes( { expense: '' } ); // Clear value\n\n\t\t\tsetAttributes( { earning: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\tupdateTotals();\n\t\t}\n\n\t\tconst updateExpense = val => {\n\t\t\tsetAttributes( { earning: '' } ); // Clear value\n\n\t\t\tsetAttributes( { expense: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\tupdateTotals();\n\t\t}\n\n\t\tconst updateTax = val => {\n\t\t\tsetAttributes( { tax: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\tupdateTotals();\n\t\t}\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t{\n\t\t\t\t\t\t!postUUID &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<PanelBody title={ __( 'Date', 'billy' ) }>\n\t\t\t\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\t\t\t\tcurrentDate={ date }\n\t\t\t\t\t\t\t\t\t\tonChange={ updateDate }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tpostUUID && postLink &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<PanelBody title={ sprintf( __( 'Reference: %s', 'billy' ), ( postType ? postType.charAt(0).toUpperCase() + postType.substring(1) : __( 'Post', 'billy' ) ) ) }>\n\t\t\t\t\t\t\t\t\t<p><a href={ postLink }>{ ( postTitle ? postTitle : postLink ) }</a></p>\n\t\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</InspectorControls>\n\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th className=\"index\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tindex &&\n\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<td className=\"date\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdate &&\n\t\t\t\t\t\t\t\t\t\tnew Date( date ).toISOString().substring( 0, 10 )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<sub>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tquarter &&\n\t\t\t\t\t\t\t\t\t\t\tsprintf( __( 'Q%s', 'billy' ), quarter )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</sub>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td className=\"description\">\n\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\tstyle={ { minWidth: '200px' } }\n\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\tplaceholder={ __( 'Description', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ description }\n\t\t\t\t\t\t\t\t\tonChange={ updateDescription }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td className=\"reference\">\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Reference', 'billy' ) }\n\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\tvalue={ reference }\n\t\t\t\t\t\t\t\t\tonChange={ updateReference }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td className=\"amount earning\">\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tlabel={ sprintf( __( '%1$s in %2$s', 'billy' ), __( 'Earning', 'billy' ), currency ) }\n\t\t\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ earning }\n\t\t\t\t\t\t\t\t\tonChange={ updateEarning }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td className=\"amount expense\">\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tlabel={ sprintf( __( '%1$s in %2$s', 'billy' ), __( 'Expense', 'billy' ), currency ) }\n\t\t\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ expense }\n\t\t\t\t\t\t\t\t\tonChange={ updateExpense }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td className=\"amount tax\">\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tlabel={ sprintf( __( '%1$s in %2$s', 'billy' ), __( 'Tax', 'billy' ), currency ) }\n\t\t\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ tax }\n\t\t\t\t\t\t\t\t\tonChange={ updateTax }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</>\n\t\t);\n\t} ),\n\n\tsave: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tindex,\n\t\t\t\tlocale,\n\t\t\t\tdate,\n\t\t\t\tquarter,\n\t\t\t\tdescription,\n\t\t\t\tearning,\n\t\t\t\texpense,\n\t\t\t\ttax,\n\t\t\t\treference,\n\t\t\t\tpostLink,\n\t\t\t},\n\t\t} = props;\n\n\t\treturn (\n\t\t\t<tr data-date={ date && new Date( date ).toISOString().substring( 0, 10 ) } data-quarter={ quarter && sprintf( __( 'Q%s', 'billy' ), quarter ) } data-reference={ reference && reference } data-earning={ earning > 0 ? earning : null } data-expense={ expense > 0 ? expense : null } data-tax={ tax > 0 ? tax : null }>\n\t\t\t\t<th className=\"index\" scope=\"row\">\n\t\t\t\t\t{\n\t\t\t\t\t\tindex &&\n\t\t\t\t\t\t\tindex\n\t\t\t\t\t}\n\t\t\t\t</th>\n\t\t\t\t<td className=\"date\" data-value={ date && new Date( date ).toISOString().substring( 0, 10 ) }>\n\t\t\t\t\t{\n\t\t\t\t\t\tdate &&\n\t\t\t\t\t\t\tnew Date( date ).toISOString().substring( 0, 10 )\n\t\t\t\t\t}\n\t\t\t\t\t<sub>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tquarter &&\n\t\t\t\t\t\t\t\tsprintf( __( 'Q%s', 'billy' ), quarter )\n\t\t\t\t\t\t}\n\t\t\t\t\t</sub>\n\t\t\t\t</td>\n\t\t\t\t<td className=\"description\">\n\t\t\t\t\t{\n\t\t\t\t\t\tdescription &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<RawHTML>{ description }</RawHTML>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t\t<td className=\"reference\">\n\t\t\t\t\t{\n\t\t\t\t\t\treference && !postLink &&\n\t\t\t\t\t\t\treference\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\treference && postLink &&\n\t\t\t\t\t\t\t<a href={ postLink }>{ reference }</a>\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t\t<td className=\"amount earning\" data-value={ earning > 0 ? earning : null }>\n\t\t\t\t\t{\n\t\t\t\t\t\tearning && earning > 0 &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tformatNumber( earning, locale )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t\t<td className=\"amount expense\" data-value={ expense > 0 ? expense : null }>\n\t\t\t\t\t{\n\t\t\t\t\t\texpense && expense > 0 &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tformatNumber( expense, locale )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t\t<td className=\"amount tax\" data-value={ tax > 0 ? tax : null }>\n\t\t\t\t\t{\n\t\t\t\t\t\ttax && tax > 0 &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tformatNumber( tax, locale )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t);\n\n\t},\n} );\n","/**\n * Header\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/blockEditor';\nimport {\n\tPanelBody,\n\tDisabled,\n} from '@wordpress/components';\nimport ServerSideRender from '@wordpress/server-side-render';\n\n\nregisterBlockType( 'billy-blocks/header', {\n\ttitle: __( 'Header', 'billy' ),\n\ticon: 'editor-table', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: props => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Info', 'billy' ) }>\n\t\t\t\t\t\t<div className=\"components-notice\">\n\t\t\t\t\t\t\t<div className=\"components-notice__content\">\n\t\t\t\t\t\t\t\t<a href={ globalDataBilly.wpAdmin + 'edit.php?post_type=billy-header' }>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsprintf( __( 'Edit the %s layout', 'billy' ), __( 'Header', 'billy' ) )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"components-notice\">\n\t\t\t\t\t\t\t<div className=\"components-notice__content\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsprintf( __( 'The %s values can be modified in the Theme Customizer.', 'billy' ), __( 'Header', 'billy' ) )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\n\t\t\t\t<Disabled>\n\t\t\t\t\t<ServerSideRender block=\"billy-blocks/header\" />\n\t\t\t\t</Disabled>\n\t\t\t</>\n\t\t);\n\t},\n\n\tsave: props => {\n\t\t// Handled by PHP.\n\t\treturn null;\n\t},\n} );\n","/**\n * Header: theme_mod\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/blockEditor';\nimport {\n\tSelectControl,\n\tPanelBody,\n\tDisabled,\n} from '@wordpress/components';\nimport ServerSideRender from '@wordpress/server-side-render';\n\n\nregisterBlockType( 'billy-blocks/theme-mod', {\n\ttitle: __( 'Theme Mod', 'billy' ),\n\ticon: 'admin-generic', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tattributes: {\n\t\tthemeMod: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tthemeMod,\n\t\t\t},\n\t\t\tsetAttributes,\n\t\t} = props;\n\n\t\tconst updateThemeMod = val => {\n\t\t\tsetAttributes( { themeMod: val } );\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Theme Mod', 'billy' ) }>\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Setting', 'billy' ) }\n\t\t\t\t\t\t\thelp={ __( 'Modify the value in the Theme Customizer.', 'billy' ) }\n\t\t\t\t\t\t\toptions={ globalDataBilly.themeModOptions }\n\t\t\t\t\t\t\tvalue={ themeMod }\n\t\t\t\t\t\t\tonChange={ updateThemeMod }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\n\t\t\t\t<Disabled>\n\t\t\t\t\t<ServerSideRender block=\"billy-blocks/theme-mod\" attributes={ props.attributes } />\n\t\t\t\t</Disabled>\n\t\t\t</>\n\t\t);\n\t},\n\n\tsave: props => {\n\t\t// Handled by PHP.\n\t\treturn null;\n\t},\n} );\n","/**\n * Invoice Actions\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport {\n\tregisterBlockType,\n} from '@wordpress/blocks';\nimport {\n\t__,\n\t_n,\n\tsprintf\n} from '@wordpress/i18n';\nimport {\n\twithSelect,\n} from '@wordpress/data';\n\n\nregisterBlockType( 'billy-blocks/invoice-actions', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Invoice', 'billy' ), __( 'Actions', 'billy' ) ),\n\ticon: 'menu-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: withSelect( ( select ) => {\n\t\treturn {\n\t\t\tpostModifiedDate: select( 'core/editor' ).getEditedPostAttribute( 'modified' ),\n\t\t};\n\t} )( props => {\n\t\tconst {\n\t\t\tpostModifiedDate,\n\t\t} = props;\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<div className=\"components-placeholder\" style={ { minHeight: 'auto' } }>\n\t\t\t\t<small>\n\t\t\t\t\t{\n\t\t\t\t\t\tsprintf( __( '%1$s: %2$s', 'billy' ), __( 'Last modified', 'billy' ), new Date( postModifiedDate ).toLocaleString() )\n\t\t\t\t\t}\n\t\t\t\t</small>\n\t\t\t</div>\n\t\t);\n\t} ),\n\n\tsave: props => {\n\t\treturn null;\n\t},\n} );\n","/**\n * Invoice Date\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/blockEditor';\nimport {\n\tPanelBody,\n\tDisabled,\n} from '@wordpress/components';\nimport ServerSideRender from '@wordpress/server-side-render';\n\n\nregisterBlockType( 'billy-blocks/invoice-date', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Invoice', 'billy' ), __( 'Date', 'billy' ) ),\n\ticon: 'calendar-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Info', 'billy' ) }>\n\t\t\t\t\t\t<div className=\"components-notice is-warning\">\n\t\t\t\t\t\t\t<div className=\"components-notice__content\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsprintf( __( 'Due to legal requirements in some countries, autogenerated data like %s can\\'t be modified anymore after an invoice has been created in the system!', 'billy' ), __( 'Date', 'billy' ) )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t\n\t\t\t\t<Disabled>\n\t\t\t\t\t<ServerSideRender block=\"billy-blocks/invoice-date\" />\n\t\t\t\t</Disabled>\n\t\t\t</>\n\t\t);\n\t},\n\n\tsave: props => {\n\t\t// Handled by PHP.\n\t\treturn null;\n\t},\n} );\n","/**\n * Due Date\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/blockEditor';\nimport {\n\tPanelBody,\n\tDisabled,\n} from '@wordpress/components';\nimport ServerSideRender from '@wordpress/server-side-render';\n\n\nregisterBlockType( 'billy-blocks/invoice-duedate', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Invoice', 'billy' ), __( 'Due Date', 'billy' ) ),\n\ticon: 'calendar-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Info', 'billy' ) }>\n\t\t\t\t\t\t<div className=\"components-notice\">\n\t\t\t\t\t\t\t<div className=\"components-notice__content\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsprintf( __( 'The %s values can be modified in the Theme Customizer.', 'billy' ), __( 'Payment due days', 'billy' ) )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\n\t\t\t\t<Disabled>\n\t\t\t\t\t<ServerSideRender block=\"billy-blocks/invoice-duedate\" />\n\t\t\t\t</Disabled>\n\t\t\t</>\n\t\t);\n\t},\n\n\tsave: props => {\n\t\t// Handled by PHP.\n\t\treturn null;\n\t},\n} );\n","/**\n * Invoice Number\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/blockEditor';\nimport {\n\tPanelBody,\n\tDisabled,\n} from '@wordpress/components';\nimport ServerSideRender from '@wordpress/server-side-render';\n\n\nregisterBlockType( 'billy-blocks/invoice-number', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Invoice', 'billy' ), __( 'Number', 'billy' ) ),\n\ticon: 'editor-ol', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Info', 'billy' ) }>\n\t\t\t\t\t\t<div className=\"components-notice\">\n\t\t\t\t\t\t\t<div className=\"components-notice__content\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsprintf( __( 'The %s values can be modified in the Theme Customizer.', 'billy' ), __( 'Invoice number: prefix', 'billy' ) )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"components-notice is-warning\">\n\t\t\t\t\t\t\t<div className=\"components-notice__content\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsprintf( __( 'Due to legal requirements in some countries, autogenerated data like %s can\\'t be modified anymore after an invoice has been created in the system!', 'billy' ), __( 'Invoice number', 'billy' ) )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t\n\t\t\t\t<Disabled>\n\t\t\t\t\t<ServerSideRender block=\"billy-blocks/invoice-number\" />\n\t\t\t\t</Disabled>\n\t\t\t</>\n\t\t);\n\t},\n\n\tsave: props => {\n\t\t// Handled by PHP.\n\t\treturn null;\n\t},\n} );\n","/**\n * Meta Field\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/blockEditor';\nimport {\n\tTextControl,\n\tPanelBody,\n} from '@wordpress/components';\nimport {\n\tRawHTML,\n} from '@wordpress/element';\n\n\nregisterBlockType( 'billy-blocks/invoice-meta', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Invoice', 'billy' ), __( 'Meta', 'billy' ) ),\n\ticon: 'editor-textcolor', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tattributes: {\n\t\tlabel: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\ttext: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tlabel,\n\t\t\t\ttext,\n\t\t\t},\n\t\t\tsetAttributes,\n\t\t} = props;\n\n\t\tconst updateLabel = val => {\n\t\t\tsetAttributes( { label: val } );\n\t\t}\n\n\t\tconst updateInput = val => {\n\t\t\tsetAttributes( { text: val } );\n\t\t}\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Label', 'billy' ) }>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"label\"\n\t\t\t\t\t\t\tvalue={ label }\n\t\t\t\t\t\t\tonChange={ updateLabel }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t\t<PanelBody title={ __( 'Text', 'billy' ) }>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"text\"\n\t\t\t\t\t\t\tvalue={ text }\n\t\t\t\t\t\t\tonChange={ updateInput }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\n\t\t\t\t<RawHTML>\n\t\t\t\t\t{\n\t\t\t\t\t\tsprintf( '<p>' + __( '<strong>%1$s</strong> <span>%2$s</span>', 'billy' ) + '</p>', ( label ? label : '' ), ( text ? text : __( 'N/A', 'billy' ) ) )\n\t\t\t\t\t}\n\t\t\t\t</RawHTML>\n\t\t\t</>\n\t\t);\n\t},\n\n\tsave: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tlabel,\n\t\t\t\ttext,\n\t\t\t},\n\t\t} = props;\n\n\t\treturn (\n\t\t\ttext && (\n\t\t\t\t<p>\n\t\t\t\t\t<RawHTML>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsprintf( '<p>' + __( '<strong>%1$s</strong> <span>%2$s</span>', 'billy' ) + '</p>', ( label ? label : '' ), ( text ? text : __( 'N/A', 'billy' ) ) )\n\t\t\t\t\t\t}\n\t\t\t\t\t</RawHTML>\n\t\t\t\t</p>\n\t\t\t)\n\t\t);\n\t},\n} );\n","/**\n * Invoice Information\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/blockEditor';\nimport {\n\tPanelBody,\n\tDisabled,\n} from '@wordpress/components';\nimport ServerSideRender from '@wordpress/server-side-render';\n\n\nregisterBlockType( 'billy-blocks/invoice-paymentinformation', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Invoice', 'billy' ), __( 'Payment Information', 'billy' ) ),\n\ticon: 'info', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Info', 'billy' ) }>\n\t\t\t\t\t\t<div className=\"components-notice\">\n\t\t\t\t\t\t\t<div className=\"components-notice__content\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsprintf( __( 'The %s values can be modified in the Theme Customizer.', 'billy' ), __( 'Payment Information', 'billy' ) )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t\n\t\t\t\t<Disabled>\n\t\t\t\t\t<ServerSideRender block=\"billy-blocks/invoice-paymentinformation\" />\n\t\t\t\t</Disabled>\n\t\t\t</>\n\t\t);\n\t},\n\n\tsave: props => {\n\t\t// Handled by PHP.\n\t\treturn null;\n\t},\n} );\n","/**\n * Invoice Table\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport {\n\tInspectorControls,\n\tInnerBlocks,\n\tRichText,\n} from '@wordpress/blockEditor';\nimport {\n\tPanelBody,\n\tTextControl,\n\tSelectControl,\n} from '@wordpress/components';\nimport {\n\tselect,\n\twithSelect,\n} from '@wordpress/data';\nimport {\n\tRawHTML,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\n\nimport {\n\tformatNumber,\n\tpercentToDecimal,\n} from '../../functions';\n\n\n/**\n * 1. Outer Block\n */\n\nregisterBlockType( 'billy-blocks/invoice-table', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Invoice', 'billy' ), __( 'Table', 'billy' ) ),\n\ticon: 'menu-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tattributes: {\n\t\tcurrency: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tlocale: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountSubtotal: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountTotal: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\ttaxRates: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\ttaxRatesTotal: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: withSelect( ( select, { clientId } ) => {\n\t\tconst { getBlocksByClientId } = select( 'core/block-editor' );\n\n\t\tglobalDataBilly.clientId = clientId;\n\n\t\t// Get child blocks\n\t\tconst childBlocks = getBlocksByClientId( clientId )[ 0 ].innerBlocks;\n\n\t\treturn {\n\t\t\tchildBlocks: childBlocks,\n\t\t};\n\t} )( props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tchildBlocks,\n\t\t\tattributes: {\n\t\t\t\tcurrency,\n\t\t\t\tlocale,\n\t\t\t\tamountSubtotal,\n\t\t\t\tamountTotal,\n\t\t\t\ttaxRates,\n\t\t\t\ttaxRatesTotal,\n\t\t\t},\n\t\t\tsetAttributes,\n\t\t} = props;\n\n\t\t//console.log(childBlocks);\n\t\tsetAttributes( { currency: globalDataBilly.currency } );\n\t\tsetAttributes( { locale: globalDataBilly.locale } );\n\n\t\t// Onload \"once\": Calculate values and update attributes\n\t\tconst updateTotals = () => {\n\t\t\tvar amountSubtotalSum = 0,\n\t\t\t\tamountTotalSum = 0,\n\t\t\t\ttaxRatesTotalSum = 0,\n\t\t\t\ttaxRatesHolderOutput = [],\n\t\t\t\ttaxRatesMergedOutput = [];\n\t\t\t\n\t\t\t// Create values-array of child block attributes\n\t\t\tif ( childBlocks && childBlocks.length > 0 ) {\n\t\t\t\tchildBlocks.map( ( childBlock, i ) => {\n\t\t\t\t\t// 1. Sum of Subtotals\n\t\t\t\t\tamountSubtotalSum += Number( childBlock.attributes.amount );\n\t\t\t\t\t\n\t\t\t\t\t// 2. Sum of Totals\n\t\t\t\t\tamountTotalSum += Number( childBlock.attributes.amount ) + ( percentToDecimal( childBlock.attributes.taxRate ) * Number( childBlock.attributes.amount ) );\n\n\t\t\t\t\t// 3. Sum of Taxrates\n\t\t\t\t\ttaxRatesHolderOutput.push( { taxRate: childBlock.attributes.taxRate, amount: ( percentToDecimal( childBlock.attributes.taxRate ) * Number( childBlock.attributes.amount ) ) } );\n\t\t\t\t} );\n\n\t\t\t\tif ( taxRatesHolderOutput.length > 0 ) {\n\t\t\t\t\t// Sum up Tax amount\n\t\t\t\t\ttaxRatesTotalSum = taxRatesHolderOutput.reduce( function ( res, value ) {\n\t\t\t\t\t\treturn res + value.amount;\n\t\t\t\t\t}, 0 );\n\t\t\t\t\ttaxRatesTotalSum = Number( taxRatesTotalSum.toFixed( 2 ) );\n\n\t\t\t\t\t// Merge same Taxrates\n\t\t\t\t\ttaxRatesHolderOutput.reduce( function ( res, value ) {\n\t\t\t\t\t\tif ( !res[ value.taxRate ] ) {\n\t\t\t\t\t\t\tres[ value.taxRate ] = { taxRate: value.taxRate, amount: 0 };\n\t\t\t\t\t\t\ttaxRatesMergedOutput.push( res[ value.taxRate ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tres[ value.taxRate ].amount += value.amount;\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t}, {} );\n\t\t\t\t}\n\n\t\t\t\tsetAttributes( { taxRatesTotal: taxRatesTotalSum } );\n\t\t\t\tsetAttributes( { taxRates: JSON.stringify( taxRatesMergedOutput ) } );\n\n\t\t\t\tsetAttributes( { amountSubtotal: amountSubtotalSum } );\n\t\t\t\tsetAttributes( { amountTotal: amountTotalSum } );\n\t\t\t}\n\t\t}\n\t\tupdateTotals();\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<div className={ 'invoicetable-block' + ( className ? ' ' + className : '' ) }>\n\t\t\t\t<InnerBlocks\n\t\t\t\t\ttemplateLock={ false }\n\t\t\t\t\ttemplate={ [\n\t\t\t\t\t\t[ 'billy-blocks/invoice-tablerow', {\n\t\t\t\t\t\t\t//placeholder: 'Enter content…',\n\t\t\t\t\t\t} ],\n\t\t\t\t\t] }\n\t\t\t\t\tallowedBlocks={ [\n\t\t\t\t\t\t'billy-blocks/invoice-tablerow',\n\t\t\t\t\t] }\n\t\t\t\t/>\n\n\t\t\t\t{\n\t\t\t\t\tamountSubtotal > 0 &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t<table className=\"totals\">\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tamountSubtotal > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr className=\"subtotal\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tamountTotal > amountSubtotal ? __( 'Subtotal', 'billy' ) : __( 'Total', 'billy' )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountSubtotal, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttaxRates && taxRatesTotal > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr className=\"taxRates\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Tax', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Sort by Taxrate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.parse( taxRates ).sort( ( a, b ) => ( percentToDecimal( a.taxRate ) - percentToDecimal( b.taxRate ) ) ).map( ( total, i ) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( total.amount > 0 ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RawHTML key={ i }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s %3$s', 'billy' ), currency, formatNumber( total.amount, locale ), '<small>(' + total.taxRate + ')</small>' + '<br>' )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tamountTotal > amountSubtotal &&\n\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr className=\"total\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Total', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTotal, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t<button id=\"updatetotals\" className=\"components-button is-secondary is-button is-small\" onClick={ updateTotals } style={ { display: ( amountSubtotal > 0 ? 'block' : 'none' ) } }>\n\t\t\t\t\t{\n\t\t\t\t\t\t__( 'Update Totals', 'billy' )\n\t\t\t\t\t}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t} ),\n\n\tsave: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tcurrency,\n\t\t\t\tlocale,\n\t\t\t\tamountSubtotal,\n\t\t\t\tamountTotal,\n\t\t\t\ttaxRates,\n\t\t\t\ttaxRatesTotal,\n\t\t\t},\n\t\t} = props;\n\n\t\treturn (\n\t\t\t<div className={ 'invoicetable-block alignwide' + ( className ? ' ' + className : '' ) }>\n\n\t\t\t\t<table className=\"table wp-block-table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t{ __( '#', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t{ __( 'Description', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t{ __( 'Amount', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttaxRates && taxRatesTotal > 0 &&\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Tax', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<InnerBlocks.Content />\n\t\t\t\t\t</tbody>\n\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tamountSubtotal > 0 &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<tr className=\"subtotal\">\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"2\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tamountTotal > amountSubtotal ? __( 'Subtotal', 'billy' ) : __( 'Total', 'billy' )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountSubtotal, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttaxRates && taxRatesTotal > 0 &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<tr className=\"taxrates\">\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"2\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Tax', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t// Sort by Taxrate\n\t\t\t\t\t\t\t\t\t\t\t\tJSON.parse( taxRates ).sort( ( a, b ) => ( percentToDecimal( a.taxRate ) - percentToDecimal( b.taxRate ) ) ).map( ( total, i ) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( total.amount > 0 ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RawHTML key={ i }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s %3$s', 'billy' ), currency, formatNumber( total.amount, locale ), '<small>(' + total.taxRate + ')</small>' + '<br>' )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tamountTotal > amountSubtotal &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<tr className=\"total\">\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"2\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Total', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTotal, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</tfoot>\n\t\t\t\t</table>\n\n\t\t\t</div>\n\t\t);\n\t},\n} );\n\n\n/**\n * 2. Inner Block\n */\n\nregisterBlockType( 'billy-blocks/invoice-tablerow', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Invoice', 'billy' ), __( 'Table Row', 'billy' ) ),\n\ticon: 'menu-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tparent: [ 'billy-blocks/invoice-table' ], // Only allow in outer block\n\tattributes: {\n\t\tindex: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '0',\n\t\t},\n\t\tcurrency: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tlocale: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tdescription: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\ttaxRate: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tamount: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountIncl: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tquantity: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tquantityRate: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: withSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockIndex,\n\t\t} = select( 'core/block-editor' );\n\n\t\treturn {\n\t\t\ti: getBlockIndex( clientId, getBlockRootClientId( clientId ) ) + 1,\n\t\t}\n\t} )( props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\ti,\n\t\t\tattributes: {\n\t\t\t\tindex,\n\t\t\t\tcurrency,\n\t\t\t\tlocale,\n\t\t\t\tdescription,\n\t\t\t\ttaxRate,\n\t\t\t\tamount,\n\t\t\t\tamountIncl,\n\t\t\t\tquantity,\n\t\t\t\tquantityRate,\n\t\t\t},\n\t\t\tsetAttributes,\n\t\t} = props;\n\n\t\tsetAttributes( { index: i } );\n\t\tsetAttributes( { currency: globalDataBilly.currency } );\n\t\tsetAttributes( { locale: globalDataBilly.locale } );\n\n\t\tif ( '' === taxRate ) {\n\t\t\tsetAttributes( { taxRate: ( 0 === globalDataBilly.taxOptions.length ? '0%' : globalDataBilly.taxOptions[ 0 ].value ) } );\n\t\t}\n\n\t\tconst updateDescription = val => {\n\t\t\tsetAttributes( { description: val } );\n\t\t}\n\n\t\tconst updateAmountIncl = val => {\n\t\t\tsetAttributes( { amountIncl: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\t// Recalculate totals on edit\n\t\t\tsetTimeout( () => {\n\t\t\t\tdocument.getElementById( \"updatetotals\" ).click();\n\t\t\t}, 1 );\n\t\t}\n\n\t\tconst updateTaxRate = val => {\n\t\t\tsetAttributes( { taxRate: val } );\n\n\t\t\tupdateAmountIncl( Number( amount ) + ( Number( amount ) * percentToDecimal( val ) ) );\n\t\t}\n\n\t\tconst updateAmount = val => {\n\t\t\tsetAttributes( { amount: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\tupdateAmountIncl( Number( val ) + ( Number( val ) * percentToDecimal( taxRate ) ) );\n\t\t}\n\n\t\tconst updateQuantity = val => {\n\t\t\tsetAttributes( { quantity: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\tupdateAmount( Number( val ) * Number( quantityRate ) );\n\t\t}\n\n\t\tconst updateQuantityRate = val => {\n\t\t\tsetAttributes( { quantityRate: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\tupdateAmount( Number( quantity ) * Number( val ) );\n\t\t}\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Quantity/Rate Calculator', 'billy' ) }>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tlabel={ __( 'Quantity', 'billy' ) }\n\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\tvalue={ quantity }\n\t\t\t\t\t\t\tonChange={ updateQuantity }\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tlabel={ sprintf( __( '%1$s in %2$s', 'billy' ), __( 'Rate', 'billy' ), currency ) }\n\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\tvalue={ quantityRate }\n\t\t\t\t\t\t\tonChange={ updateQuantityRate }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th className=\"index\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tindex &&\n\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\tclassName=\"description\"\n\t\t\t\t\t\t\t\t\tstyle={ { width: '30vw', minWidth: '200px' } }\n\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\tplaceholder={ __( 'Description', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ description }\n\t\t\t\t\t\t\t\t\tonChange={ updateDescription }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tlabel={ sprintf( __( '%1$s in %2$s', 'billy' ), __( 'Amount', 'billy' ), currency ) }\n\t\t\t\t\t\t\t\t\tclassName=\"amount\"\n\t\t\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ amount }\n\t\t\t\t\t\t\t\t\tonChange={ updateAmount }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\tclassName=\"taxrate\"\n\t\t\t\t\t\t\t\t\tlabel={ sprintf( __( '%1$s in %2$s', 'billy' ), __( 'Tax', 'billy' ), '%' ) }\n\t\t\t\t\t\t\t\t\tvalue={ taxRate }\n\t\t\t\t\t\t\t\t\toptions={ ( 0 !== globalDataBilly.taxOptions.length ? globalDataBilly.taxOptions : ( '0%' !== taxRate && 0 === globalDataBilly.taxOptions.length ? [ { label: taxRate, value: taxRate }, { label: '0%', value: '0%' } ] : '' ) ) }\n\t\t\t\t\t\t\t\t\tonChange={ updateTaxRate }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tdisabled=\"disabled\"\n\t\t\t\t\t\t\t\t\tlabel={ currency }\n\t\t\t\t\t\t\t\t\tclassName=\"amount-tax\"\n\t\t\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ amountIncl }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</>\n\t\t);\n\t} ),\n\n\tsave: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tindex,\n\t\t\t\tlocale,\n\t\t\t\tdescription,\n\t\t\t\ttaxRate,\n\t\t\t\tamount,\n\t\t\t},\n\t\t} = props;\n\n\t\treturn (\n\t\t\t<tr>\n\t\t\t\t<th scope=\"row\">\n\t\t\t\t\t{\n\t\t\t\t\t\tindex &&\n\t\t\t\t\t\t\tindex\n\t\t\t\t\t}\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t{\n\t\t\t\t\t\tdescription &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<RawHTML>{ description }</RawHTML>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t{\n\t\t\t\t\t\tamount &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tformatNumber( amount, locale )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t\t{\n\t\t\t\t\ttaxRate && ( percentToDecimal( taxRate ) * amount ) > 0 &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<RawHTML>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), formatNumber( ( percentToDecimal( taxRate ) * amount ), locale ), '<small>(' + taxRate + ')</small>' )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</tr>\n\t\t);\n\n\t},\n} );\n","/**\n * Quote Actions\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport {\n\tregisterBlockType,\n} from '@wordpress/blocks';\nimport {\n\t__,\n\t_n,\n\tsprintf\n} from '@wordpress/i18n';\nimport {\n\twithSelect,\n} from '@wordpress/data';\n\n\nregisterBlockType( 'billy-blocks/quote-actions', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Quote', 'billy' ), __( 'Actions', 'billy' ) ),\n\ticon: 'menu-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: withSelect( ( select ) => {\n\t\treturn {\n\t\t\tpostModifiedDate: select( 'core/editor' ).getEditedPostAttribute( 'modified' ),\n\t\t};\n\t} )( props => {\n\t\tconst {\n\t\t\tpostModifiedDate,\n\t\t} = props;\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<div className=\"components-placeholder\" style={ { minHeight: 'auto' } }>\n\t\t\t\t<small>\n\t\t\t\t\t{\n\t\t\t\t\t\tsprintf( __( '%1$s: %2$s', 'billy' ), __( 'Last modified', 'billy' ), new Date( postModifiedDate ).toLocaleString() )\n\t\t\t\t\t}\n\t\t\t\t</small>\n\t\t\t</div>\n\t\t);\n\t} ),\n\n\tsave: props => {\n\t\treturn null;\n\t},\n} );\n","/**\n * Quote Date\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport ServerSideRender from '@wordpress/server-side-render';\n\n\nregisterBlockType( 'billy-blocks/quote-date', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Quote', 'billy' ), __( 'Date', 'billy' ) ),\n\ticon: 'calendar-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<ServerSideRender block=\"billy-blocks/quote-date\" />\n\t\t);\n\t},\n\n\tsave: props => {\n\t\t// Handled by PHP.\n\t\treturn null;\n\t},\n} );\n","/**\n * Quote Information\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/blockEditor';\nimport { PanelBody } from '@wordpress/components';\nimport ServerSideRender from '@wordpress/server-side-render';\n\n\nregisterBlockType( 'billy-blocks/quote-information', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Quote', 'billy' ), __( 'Information', 'billy' ) ),\n\ticon: 'info', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Info', 'billy' ) }>\n\t\t\t\t\t\t<div className=\"components-notice\">\n\t\t\t\t\t\t\t<div className=\"components-notice__content\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsprintf( __( 'The %s values can be modified in the Theme Customizer.', 'billy' ), __( 'Quote Information', 'billy' ) )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t\n\t\t\t\t<ServerSideRender block=\"billy-blocks/quote-information\" />\n\t\t\t</>\n\t\t);\n\t},\n\n\tsave: props => {\n\t\t// Handled by PHP.\n\t\treturn null;\n\t},\n} );\n","/**\n * Meta Field\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/blockEditor';\nimport {\n\tTextControl,\n\tPanelBody,\n} from '@wordpress/components';\nimport {\n\tRawHTML,\n} from '@wordpress/element';\n\n\nregisterBlockType( 'billy-blocks/quote-meta', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Quote', 'billy' ), __( 'Meta', 'billy' ) ),\n\ticon: 'editor-textcolor', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tattributes: {\n\t\tlabel: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\ttext: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tlabel,\n\t\t\t\ttext,\n\t\t\t},\n\t\t\tsetAttributes,\n\t\t} = props;\n\n\t\tconst updateLabel = val => {\n\t\t\tsetAttributes( { label: val } );\n\t\t}\n\n\t\tconst updateInput = val => {\n\t\t\tsetAttributes( { text: val } );\n\t\t}\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Label', 'billy' ) }>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"label\"\n\t\t\t\t\t\t\tvalue={ label }\n\t\t\t\t\t\t\tonChange={ updateLabel }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t\t<PanelBody title={ __( 'Text', 'billy' ) }>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"text\"\n\t\t\t\t\t\t\tvalue={ text }\n\t\t\t\t\t\t\tonChange={ updateInput }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\n\t\t\t\t<RawHTML>\n\t\t\t\t\t{\n\t\t\t\t\t\tsprintf( '<p>' + __( '<strong>%1$s</strong> <span>%2$s</span>', 'billy' ) + '</p>', ( label ? label : '' ), ( text ? text : __( 'N/A', 'billy' ) ) )\n\t\t\t\t\t}\n\t\t\t\t</RawHTML>\n\t\t\t</>\n\t\t);\n\t},\n\n\tsave: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tlabel,\n\t\t\t\ttext,\n\t\t\t},\n\t\t} = props;\n\n\t\treturn (\n\t\t\ttext && (\n\t\t\t\t<p>\n\t\t\t\t\t<RawHTML>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsprintf( '<p>' + __( '<strong>%1$s</strong> <span>%2$s</span>', 'billy' ) + '</p>', ( label ? label : '' ), ( text ? text : __( 'N/A', 'billy' ) ) )\n\t\t\t\t\t\t}\n\t\t\t\t\t</RawHTML>\n\t\t\t\t</p>\n\t\t\t)\n\t\t);\n\t},\n} );\n","/**\n * Quote Table\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport {\n\tInspectorControls,\n\tInnerBlocks,\n\tRichText,\n} from '@wordpress/blockEditor';\nimport {\n\tPanelBody,\n\tTextControl,\n\tSelectControl,\n} from '@wordpress/components';\nimport {\n\tselect,\n\twithSelect,\n} from '@wordpress/data';\nimport {\n\tRawHTML,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\n\nimport {\n\tformatNumber,\n\tpercentToDecimal,\n} from '../../functions';\n\n\n/**\n * 1. Outer Block\n */\n\nregisterBlockType( 'billy-blocks/quote-table', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Quote', 'billy' ), __( 'Table', 'billy' ) ),\n\ticon: 'menu-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tattributes: {\n\t\tcurrency: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tlocale: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountSubtotal: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountTotal: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\ttaxRates: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\ttaxRatesTotal: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: withSelect( ( select, { clientId } ) => {\n\t\tconst { getBlocksByClientId } = select( 'core/block-editor' );\n\n\t\tglobalDataBilly.clientId = clientId;\n\n\t\t// Get child blocks\n\t\tconst childBlocks = getBlocksByClientId( clientId )[ 0 ].innerBlocks;\n\n\t\treturn {\n\t\t\tchildBlocks: childBlocks,\n\t\t};\n\t} )( props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tchildBlocks,\n\t\t\tattributes: {\n\t\t\t\tcurrency,\n\t\t\t\tlocale,\n\t\t\t\tamountSubtotal,\n\t\t\t\tamountTotal,\n\t\t\t\ttaxRates,\n\t\t\t\ttaxRatesTotal,\n\t\t\t},\n\t\t\tsetAttributes,\n\t\t} = props;\n\n\t\t//console.log(childBlocks);\n\t\tsetAttributes( { currency: globalDataBilly.currency } );\n\t\tsetAttributes( { locale: globalDataBilly.locale } );\n\n\t\t// Onload \"once\": Calculate values and update attributes\n\t\tconst updateTotals = () => {\n\t\t\tvar amountSubtotalSum = 0,\n\t\t\t\tamountTotalSum = 0,\n\t\t\t\ttaxRatesTotalSum = 0,\n\t\t\t\ttaxRatesHolderOutput = [],\n\t\t\t\ttaxRatesMergedOutput = [];\n\t\t\t\n\t\t\t// Create values-array of child block attributes\n\t\t\tif ( childBlocks && childBlocks.length > 0 ) {\n\t\t\t\tchildBlocks.map( ( childBlock, i ) => {\n\t\t\t\t\t// 1. Sum of Subtotals\n\t\t\t\t\tamountSubtotalSum += Number( childBlock.attributes.amount );\n\t\t\t\t\t\n\t\t\t\t\t// 2. Sum of Totals\n\t\t\t\t\tamountTotalSum += Number( childBlock.attributes.amount ) + ( percentToDecimal( childBlock.attributes.taxRate ) * Number( childBlock.attributes.amount ) );\n\n\t\t\t\t\t// 3. Sum of Taxrates\n\t\t\t\t\ttaxRatesHolderOutput.push( { taxRate: childBlock.attributes.taxRate, amount: ( percentToDecimal( childBlock.attributes.taxRate ) * Number( childBlock.attributes.amount ) ) } );\n\t\t\t\t} );\n\n\t\t\t\tif ( taxRatesHolderOutput.length > 0 ) {\n\t\t\t\t\t// Sum up Tax amount\n\t\t\t\t\ttaxRatesTotalSum = taxRatesHolderOutput.reduce( function ( res, value ) {\n\t\t\t\t\t\treturn res + value.amount;\n\t\t\t\t\t}, 0 );\n\t\t\t\t\ttaxRatesTotalSum = Number( taxRatesTotalSum.toFixed( 2 ) );\n\n\t\t\t\t\t// Merge same Taxrates\n\t\t\t\t\ttaxRatesHolderOutput.reduce( function ( res, value ) {\n\t\t\t\t\t\tif ( !res[ value.taxRate ] ) {\n\t\t\t\t\t\t\tres[ value.taxRate ] = { taxRate: value.taxRate, amount: 0 };\n\t\t\t\t\t\t\ttaxRatesMergedOutput.push( res[ value.taxRate ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tres[ value.taxRate ].amount += value.amount;\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t}, {} );\n\t\t\t\t}\n\n\t\t\t\tsetAttributes( { taxRatesTotal: taxRatesTotalSum } );\n\t\t\t\tsetAttributes( { taxRates: JSON.stringify( taxRatesMergedOutput ) } );\n\n\t\t\t\tsetAttributes( { amountSubtotal: amountSubtotalSum } );\n\t\t\t\tsetAttributes( { amountTotal: amountTotalSum } );\n\t\t\t}\n\t\t}\n\t\tupdateTotals();\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<div className={ 'quotetable-block' + ( className ? ' ' + className : '' ) }>\n\t\t\t\t<InnerBlocks\n\t\t\t\t\ttemplateLock={ false }\n\t\t\t\t\ttemplate={ [\n\t\t\t\t\t\t[ 'billy-blocks/quote-tablerow', {\n\t\t\t\t\t\t\t//placeholder: 'Enter content…',\n\t\t\t\t\t\t} ],\n\t\t\t\t\t] }\n\t\t\t\t\tallowedBlocks={ [\n\t\t\t\t\t\t'billy-blocks/quote-tablerow',\n\t\t\t\t\t] }\n\t\t\t\t/>\n\n\t\t\t\t{\n\t\t\t\t\tamountSubtotal > 0 &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t<table className=\"totals\">\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tamountSubtotal > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr className=\"subtotal\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tamountTotal > amountSubtotal ? __( 'Subtotal', 'billy' ) : __( 'Total', 'billy' )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountSubtotal, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttaxRates && taxRatesTotal > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr className=\"taxRates\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Tax', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Sort by Taxrate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.parse( taxRates ).sort( ( a, b ) => ( percentToDecimal( a.taxRate ) - percentToDecimal( b.taxRate ) ) ).map( ( total, i ) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( total.amount > 0 ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RawHTML key={ i }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s %3$s', 'billy' ), currency, formatNumber( total.amount, locale ), '<small>(' + total.taxRate + ')</small>' + '<br>' )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tamountTotal > amountSubtotal &&\n\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr className=\"total\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Total', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTotal, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t<button id=\"updatetotals\" className=\"components-button is-secondary is-button is-small\" onClick={ updateTotals } style={ { display: ( amountSubtotal > 0 ? 'block' : 'none' ) } }>\n\t\t\t\t\t{\n\t\t\t\t\t\t__( 'Update Totals', 'billy' )\n\t\t\t\t\t}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t} ),\n\n\tsave: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tcurrency,\n\t\t\t\tlocale,\n\t\t\t\tamountSubtotal,\n\t\t\t\tamountTotal,\n\t\t\t\ttaxRates,\n\t\t\t\ttaxRatesTotal,\n\t\t\t},\n\t\t} = props;\n\n\t\treturn (\n\t\t\t<div className={ 'quotetable-block alignwide' + ( className ? ' ' + className : '' ) }>\n\n\t\t\t\t<table className=\"table wp-block-table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t{ __( '#', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t{ __( 'Description', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t{ __( 'Amount', 'billy' ) }\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttaxRates && taxRatesTotal > 0 &&\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Tax', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<InnerBlocks.Content />\n\t\t\t\t\t</tbody>\n\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tamountSubtotal > 0 &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<tr className=\"subtotal\">\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"2\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tamountTotal > amountSubtotal ? __( 'Subtotal', 'billy' ) : __( 'Total', 'billy' )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountSubtotal, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttaxRates && taxRatesTotal > 0 &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<tr className=\"taxrates\">\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"2\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Tax', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t// Sort by Taxrate\n\t\t\t\t\t\t\t\t\t\t\t\tJSON.parse( taxRates ).sort( ( a, b ) => ( percentToDecimal( a.taxRate ) - percentToDecimal( b.taxRate ) ) ).map( ( total, i ) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( total.amount > 0 ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RawHTML key={ i }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s %3$s', 'billy' ), currency, formatNumber( total.amount, locale ), '<small>(' + total.taxRate + ')</small>' + '<br>' )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tamountTotal > amountSubtotal &&\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<tr className=\"total\">\n\t\t\t\t\t\t\t\t\t\t<td colSpan=\"2\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Total', 'billy' ) }\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), currency, formatNumber( amountTotal, locale ) )\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</tfoot>\n\t\t\t\t</table>\n\n\t\t\t</div>\n\t\t);\n\t},\n} );\n\n\n/**\n * 2. Inner Block\n */\n\nregisterBlockType( 'billy-blocks/quote-tablerow', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Quote', 'billy' ), __( 'Table Row', 'billy' ) ),\n\ticon: 'menu-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tparent: [ 'billy-blocks/quote-table' ], // Only allow in outer block\n\tattributes: {\n\t\tindex: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '0',\n\t\t},\n\t\tcurrency: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tlocale: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tdescription: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\ttaxRate: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t},\n\t\tamount: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tamountIncl: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tquantity: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t\tquantityRate: {\n\t\t\ttype: 'number',\n\t\t\tdefault: '',\n\t\t},\n\t},\n\n\tgetEditWrapperProps() {\n\t\treturn { 'data-align': 'wide' };\n\t},\n\n\tedit: withSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockIndex,\n\t\t} = select( 'core/block-editor' );\n\n\t\treturn {\n\t\t\ti: getBlockIndex( clientId, getBlockRootClientId( clientId ) ) + 1,\n\t\t}\n\t} )( props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\ti,\n\t\t\tattributes: {\n\t\t\t\tindex,\n\t\t\t\tcurrency,\n\t\t\t\tlocale,\n\t\t\t\tdescription,\n\t\t\t\ttaxRate,\n\t\t\t\tamount,\n\t\t\t\tamountIncl,\n\t\t\t\tquantity,\n\t\t\t\tquantityRate,\n\t\t\t},\n\t\t\tsetAttributes,\n\t\t} = props;\n\n\t\tsetAttributes( { index: i } );\n\t\tsetAttributes( { currency: globalDataBilly.currency } );\n\t\tsetAttributes( { locale: globalDataBilly.locale } );\n\n\t\tif ( '' === taxRate ) {\n\t\t\tsetAttributes( { taxRate: ( 0 === globalDataBilly.taxOptions.length ? '0%' : globalDataBilly.taxOptions[ 0 ].value ) } );\n\t\t}\n\n\t\tconst updateDescription = val => {\n\t\t\tsetAttributes( { description: val } );\n\t\t}\n\n\t\tconst updateAmountIncl = val => {\n\t\t\tsetAttributes( { amountIncl: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\t// Recalculate totals on edit\n\t\t\tsetTimeout( () => {\n\t\t\t\tdocument.getElementById( \"updatetotals\" ).click();\n\t\t\t}, 1 );\n\t\t}\n\n\t\tconst updateTaxRate = val => {\n\t\t\tsetAttributes( { taxRate: val } );\n\n\t\t\tupdateAmountIncl( Number( amount ) + ( Number( amount ) * percentToDecimal( val ) ) );\n\t\t}\n\n\t\tconst updateAmount = val => {\n\t\t\tsetAttributes( { amount: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\tupdateAmountIncl( Number( val ) + ( Number( val ) * percentToDecimal( taxRate ) ) );\n\t\t}\n\n\t\tconst updateQuantity = val => {\n\t\t\tsetAttributes( { quantity: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\tupdateAmount( Number( val ) * Number( quantityRate ) );\n\t\t}\n\n\t\tconst updateQuantityRate = val => {\n\t\t\tsetAttributes( { quantityRate: ( val > 0 ? Number( val ) : '' ) } );\n\n\t\t\tupdateAmount( Number( quantity ) * Number( val ) );\n\t\t}\n\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Quantity/Rate Calculator', 'billy' ) }>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tlabel={ __( 'Quantity', 'billy' ) }\n\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\tvalue={ quantity }\n\t\t\t\t\t\t\tonChange={ updateQuantity }\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tlabel={ sprintf( __( '%1$s in %2$s', 'billy' ), __( 'Rate', 'billy' ), currency ) }\n\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\tvalue={ quantityRate }\n\t\t\t\t\t\t\tonChange={ updateQuantityRate }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th className=\"index\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tindex &&\n\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\tclassName=\"description\"\n\t\t\t\t\t\t\t\t\tstyle={ { width: '30vw', minWidth: '200px' } }\n\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\tplaceholder={ __( 'Description', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ description }\n\t\t\t\t\t\t\t\t\tonChange={ updateDescription }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tlabel={ sprintf( __( '%1$s in %2$s', 'billy' ), __( 'Amount', 'billy' ), currency ) }\n\t\t\t\t\t\t\t\t\tclassName=\"amount\"\n\t\t\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ amount }\n\t\t\t\t\t\t\t\t\tonChange={ updateAmount }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\tclassName=\"taxrate\"\n\t\t\t\t\t\t\t\t\tlabel={ sprintf( __( '%1$s in %2$s', 'billy' ), __( 'Tax', 'billy' ), '%' ) }\n\t\t\t\t\t\t\t\t\tvalue={ taxRate }\n\t\t\t\t\t\t\t\t\toptions={ ( 0 !== globalDataBilly.taxOptions.length ? globalDataBilly.taxOptions : ( '0%' !== taxRate && 0 === globalDataBilly.taxOptions.length ? [ { label: taxRate, value: taxRate }, { label: '0%', value: '0%' } ] : '' ) ) }\n\t\t\t\t\t\t\t\t\tonChange={ updateTaxRate }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tdisabled=\"disabled\"\n\t\t\t\t\t\t\t\t\tlabel={ currency }\n\t\t\t\t\t\t\t\t\tclassName=\"amount-tax\"\n\t\t\t\t\t\t\t\t\tplaceholder={ __( '0', 'billy' ) }\n\t\t\t\t\t\t\t\t\tvalue={ amountIncl }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</>\n\t\t);\n\t} ),\n\n\tsave: props => {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tattributes: {\n\t\t\t\tindex,\n\t\t\t\tlocale,\n\t\t\t\tdescription,\n\t\t\t\ttaxRate,\n\t\t\t\tamount,\n\t\t\t},\n\t\t} = props;\n\n\t\treturn (\n\t\t\t<tr>\n\t\t\t\t<th scope=\"row\">\n\t\t\t\t\t{\n\t\t\t\t\t\tindex &&\n\t\t\t\t\t\t\tindex\n\t\t\t\t\t}\n\t\t\t\t</th>\n\t\t\t\t<td>\n\t\t\t\t\t{\n\t\t\t\t\t\tdescription &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t<RawHTML>{ description }</RawHTML>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t{\n\t\t\t\t\t\tamount &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tformatNumber( amount, locale )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t\t{\n\t\t\t\t\ttaxRate && ( percentToDecimal( taxRate ) * amount ) > 0 &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<RawHTML>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsprintf( __( '%1$s %2$s', 'billy' ), formatNumber( ( percentToDecimal( taxRate ) * amount ), locale ), '<small>(' + taxRate + ')</small>' )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</tr>\n\t\t);\n\n\t},\n} );\n","/**\n * Quote Valid Until Date\n * https://wordpress.org/gutenberg/handbook/designers-developers/developers/tutorials/block-tutorial/writing-your-first-block-type\n */\n\n/**\n * WordPress dependencies\n */\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport {\n\t__,\n\tsprintf\n} from '@wordpress/i18n';\nimport ServerSideRender from '@wordpress/server-side-render';\n\n\nregisterBlockType( 'billy-blocks/quote-validuntildate', {\n\ttitle: sprintf( __( '%1$s: %2$s', 'billy' ), __( 'Quote', 'billy' ), __( 'Valid Until', 'billy' ) ),\n\ticon: 'calendar-alt', // https://developer.wordpress.org/resource/dashicons\n\tcategory: 'billy-blocks', // Custom category: see index.php\n\tsupports: {\n\t\tinserter: false,\n\t\treusable: false,\n\t\thtml: false,\n\t},\n\n\tedit: props => {\n\t\t// Markup: Backend\n\t\treturn (\n\t\t\t<ServerSideRender block=\"billy-blocks/quote-validuntildate\" />\n\t\t);\n\t},\n\n\tsave: props => {\n\t\t// Handled by PHP.\n\t\treturn null;\n\t},\n} );\n","export const getCurrency = () => {\n\treturn globalDataBilly.currency;\n}\n\nexport const formatNumber = ( val, l = undefined ) => {\n\treturn val.toLocaleString( l, { 'minimumFractionDigits': 2, 'maximumFractionDigits': 2 } );\n}\n\nexport const percentToDecimal = val => {\n\treturn parseFloat( val ) / 100;\n}\n\nexport const getQuarter = d => {\n\td = new Date( d ) || new Date();\n\tvar q = [ 1, 2, 3, 4 ];\n\treturn q[ Math.floor( d.getMonth() / 3 ) ];\n}\n","/**\n * Import blocks\n */\n\n// Basic\nimport './_header/header/index';\nimport './_header/theme-mod/index';\n\nimport './_invoice/actions/index';\nimport './_invoice/meta/index';\nimport './_invoice/date/index';\nimport './_invoice/duedate/index';\nimport './_invoice/invoice-number/index';\nimport './_invoice/paymentinformation/index';\nimport './_invoice/table/index';\n\nimport './_quote/actions/index';\nimport './_quote/meta/index';\nimport './_quote/date/index';\nimport './_quote/information/index';\nimport './_quote/table/index';\nimport './_quote/validuntildate/index';\n\nimport './_accounting/table/index';\nimport './_accounting/actions/index';\n","(function() { module.exports = this[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = this[\"wp\"][\"blocks\"]; }());","(function() { module.exports = this[\"wp\"][\"components\"]; }());","(function() { module.exports = this[\"wp\"][\"data\"]; }());","(function() { module.exports = this[\"wp\"][\"element\"]; }());","(function() { module.exports = this[\"wp\"][\"i18n\"]; }());","(function() { module.exports = this[\"wp\"][\"serverSideRender\"]; }());"],"sourceRoot":""}