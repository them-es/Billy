(()=>{"use strict";const e=window.wp.i18n,t=window.wp.blocks,l=window.wp.blockEditor,a=window.wp.components,n=window.wp.data,r=window.wp.element,i=(e,t=void 0)=>e.toLocaleString(t,{minimumFractionDigits:2,maximumFractionDigits:2}),s=e=>parseFloat(e)/100,o=window.ReactJSXRuntime,u=[{attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},description:{type:"string",default:""},taxRate:{type:"string",default:""},amount:{type:"number",default:""},amountIncl:{type:"number",default:""},quantity:{type:"number",default:""},quantityRate:{type:"number",default:""}},save:t=>{const{className:a,attributes:{index:n,locale:u,taxRate:c,amount:d}}=t;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:n&&n}),(0,o.jsx)("td",{children:(0,o.jsx)(l.InnerBlocks.Content,{})}),(0,o.jsx)("td",{children:d&&i(d,u)}),c&&s(c)*d>0&&(0,o.jsx)("td",{children:(0,o.jsx)(r.RawHTML,{children:(0,e.sprintf)((0,e.__)("%1$s %2$s","billy"),i(s(c)*d,u),"<small>("+c+")</small>")})})]})}},{attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},description:{type:"string",default:""},taxRate:{type:"string",default:""},amount:{type:"number",default:""},amountIncl:{type:"number",default:""},quantity:{type:"number",default:""},quantityRate:{type:"number",default:""}},save:t=>{const{className:l,attributes:{index:a,locale:n,description:u,taxRate:c,amount:d}}=t;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:a&&a}),(0,o.jsx)("td",{children:u&&(0,o.jsx)(r.RawHTML,{children:u})}),(0,o.jsx)("td",{children:d&&i(d,n)}),c&&s(c)*d>0&&(0,o.jsx)("td",{children:(0,o.jsx)(r.RawHTML,{children:(0,e.sprintf)((0,e.__)("%1$s %2$s","billy"),i(s(c)*d,n),"<small>("+c+")</small>")})})]})}}],c=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"billy-blocks/quote-tablerow","title":"Quote: Table Row","icon":"menu-alt","category":"billy-blocks","parent":["billy-blocks/quote-table"],"textdomain":"billy","attributes":{"index":{"type":"number","default":"0"},"currency":{"type":"string","default":""},"locale":{"type":"string","default":""},"taxRate":{"type":"string","default":""},"amount":{"type":"number","default":""},"amountIncl":{"type":"number","default":""},"quantity":{"type":"number","default":""},"quantityRate":{"type":"number","default":""}},"supports":{"inserter":false,"reusable":false,"html":false},"editorScript":"file:./index.js"}'),{name:d}=c;(0,t.registerBlockType)({name:d,...c},{getEditWrapperProps:()=>({"data-align":"wide"}),edit:function({clientId:t,attributes:{index:i,currency:u,locale:c,description:d,taxRate:b,amount:p,amountIncl:m,quantity:y,quantityRate:x},setAttributes:h}){const f=(0,l.useBlockProps)(),j=(0,n.useSelect)(e=>{const{getBlockRootClientId:l,getBlockIndex:a}=e("core/block-editor");return{i:a(t,l(t))+1}},[t]);(0,r.useEffect)(()=>{h({index:j.i,currency:globalDataBilly.currency,locale:globalDataBilly.locale}),""===b&&h({taxRate:0===globalDataBilly.taxOptions.length?"0%":globalDataBilly.taxOptions[0].value})},[j,b]);const g=e=>{h({amountIncl:e>0?Number(e):""})},w=e=>{h({amount:e>0?Number(e):""}),g(Number(e)+Number(e)*s(b))};return(0,o.jsxs)("div",{...f,children:[(0,o.jsx)(l.InspectorControls,{children:(0,o.jsxs)(a.PanelBody,{title:(0,e.__)("Quantity/Rate Calculator","billy"),children:[(0,o.jsx)(a.TextControl,{type:"number",label:(0,e.__)("Quantity","billy"),placeholder:(0,e.__)("0","billy"),value:null!=y?y:"",onChange:e=>{h({quantity:e>0?Number(e):""}),w(Number(e)*Number(x))}}),(0,o.jsx)(a.TextControl,{type:"number",label:(0,e.sprintf)((0,e.__)("%1$s in %2$s","billy"),(0,e.__)("Rate","billy"),u),placeholder:(0,e.__)("0","billy"),value:null!=x?x:"",onChange:e=>{h({quantityRate:e>0?Number(e):""}),w(Number(y)*Number(e))}})]})}),(0,o.jsx)("table",{children:(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"index",children:i&&i}),(0,o.jsx)("td",{style:{width:"30vw",minWidth:"200px"},children:(0,o.jsx)(l.InnerBlocks,{template:[["core/paragraph",{content:d||""}]],allowedBlocks:["core/block","core/heading","core/paragraph","core/list","core/html"]})}),(0,o.jsx)("td",{children:(0,o.jsx)(a.TextControl,{type:"number",label:(0,e.sprintf)((0,e.__)("%1$s in %2$s","billy"),(0,e.__)("Amount","billy"),u),className:"amount",placeholder:(0,e.__)("0","billy"),value:null!=p?p:"",onChange:w})}),(0,o.jsx)("td",{children:(0,o.jsx)(a.SelectControl,{className:"taxrate",label:(0,e.sprintf)((0,e.__)("%1$s in %2$s","billy"),(0,e.__)("Tax","billy"),"%"),value:null!=b?b:"",options:0!==globalDataBilly.taxOptions.length?globalDataBilly.taxOptions:"0%"!==b&&0===globalDataBilly.taxOptions.length?[{label:b,value:b},{label:"0%",value:"0%"}]:"",onChange:e=>{h({taxRate:e}),g(Number(p)+Number(p)*s(e))}})}),(0,o.jsx)("td",{children:(0,o.jsx)(a.TextControl,{type:"number",disabled:"disabled",label:u,className:"amount-tax",placeholder:(0,e.__)("0","billy"),value:null!=m?m:""})})]})})})]})},save:function({attributes:{index:t,locale:a,taxRate:n,amount:u}}){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:t&&t}),(0,o.jsx)("td",{children:(0,o.jsx)(l.InnerBlocks.Content,{})}),(0,o.jsx)("td",{children:u&&i(u,a)}),n&&s(n)*u>0&&(0,o.jsx)("td",{children:(0,o.jsx)(r.RawHTML,{children:(0,e.sprintf)((0,e.__)("%1$s %2$s","billy"),i(s(n)*u,a),"<small>("+n+")</small>")})})]})},deprecated:u})})();