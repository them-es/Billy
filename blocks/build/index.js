!function(e){var t={};function l(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=t,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=7)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.blocks},function(e,t){e.exports=window.wp.serverSideRender},function(e,t){e.exports=window.wp.data},function(e,t,l){"use strict";l.r(t);var a=l(0),n=l(4),c=l(1),r=l(3),b=l(2),s=l(5),i=l.n(s);Object(n.registerBlockType)("billy-blocks/header",{title:Object(c.__)("Header","billy"),icon:"editor-table",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:function(e){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Info","billy")},Object(a.createElement)("div",{className:"components-notice"},Object(a.createElement)("div",{className:"components-notice__content"},Object(a.createElement)("a",{href:globalDataBilly.wpAdmin+"edit.php?post_type=billy-header"},Object(c.sprintf)(Object(c.__)("Edit the %s layout","billy"),Object(c.__)("Header","billy"))))),Object(a.createElement)("div",{className:"components-notice"},Object(a.createElement)("div",{className:"components-notice__content"},Object(c.sprintf)(Object(c.__)("The %s values can be modified in the Theme Customizer.","billy"),Object(c.__)("Header","billy")))))),Object(a.createElement)(b.Disabled,null,Object(a.createElement)(i.a,{block:"billy-blocks/header"})))},save:function(e){return null}}),Object(n.registerBlockType)("billy-blocks/theme-mod",{title:Object(c.__)("Theme Mod","billy"),icon:"admin-generic",category:"billy-blocks",attributes:{themeMod:{type:"string",default:""}},supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){e.className;var t=e.attributes.themeMod,l=e.setAttributes;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Theme Mod","billy")},Object(a.createElement)(b.SelectControl,{label:Object(c.__)("Setting","billy"),help:Object(c.__)("Modify the value in the Theme Customizer.","billy"),options:globalDataBilly.themeModOptions,value:t,onChange:function(e){l({themeMod:e})}}))),Object(a.createElement)(b.Disabled,null,Object(a.createElement)(i.a,{block:"billy-blocks/theme-mod",attributes:e.attributes})))},save:function(e){return null}});var o=l(6);Object(n.registerBlockType)("billy-blocks/invoice-actions",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Invoice","billy"),Object(c.__)("Actions","billy")),icon:"menu-alt",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:Object(o.withSelect)((function(e){return{postModifiedDate:e("core/editor").getEditedPostAttribute("modified")}}))((function(e){var t=e.postModifiedDate;return Object(a.createElement)("div",{className:"components-placeholder",style:{minHeight:"auto"}},Object(a.createElement)("small",null,Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Last modified","billy"),new Date(t).toLocaleString())))})),save:function(e){return null}}),Object(n.registerBlockType)("billy-blocks/invoice-meta",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Invoice","billy"),Object(c.__)("Meta","billy")),icon:"editor-textcolor",category:"billy-blocks",attributes:{label:{type:"string",default:""},text:{type:"string",default:""}},supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){e.className;var t=e.attributes,l=t.label,n=t.text,s=e.setAttributes;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Label","billy")},Object(a.createElement)(b.TextControl,{type:"text",className:"label",value:l,onChange:function(e){s({label:e})}})),Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Text","billy")},Object(a.createElement)(b.TextControl,{type:"text",className:"text",value:n,onChange:function(e){s({text:e})}}))),Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)(Object(c.__)('<div class="label">%1$s</div> <div class="text">%2$s</div>',"billy"),l||"",n||Object(c.__)("N/A","billy"))))},save:function(e){e.className;var t=e.attributes,l=t.label,n=t.text;return n&&Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)(Object(c.__)('<div class="label">%1$s</div> <div class="text">%2$s</div>',"billy"),l||"",n||Object(c.__)("N/A","billy")))},deprecated:[{attributes:{label:{type:"string",default:""},text:{type:"string",default:""}},save:function(e){e.className;var t=e.attributes,l=t.label,n=t.text;return n&&Object(a.createElement)("p",null,Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)("<p>"+Object(c.__)("<strong>%1$s</strong> <span>%2$s</span>","billy")+"</p>",l||"",n||Object(c.__)("N/A","billy"))))}}]}),Object(n.registerBlockType)("billy-blocks/invoice-date",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Invoice","billy"),Object(c.__)("Date","billy")),icon:"calendar-alt",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Info","billy")},Object(a.createElement)("div",{className:"components-notice is-warning"},Object(a.createElement)("div",{className:"components-notice__content"},Object(c.sprintf)(Object(c.__)("Due to legal requirements in some countries, autogenerated data like %s can't be modified anymore after an invoice has been created in the system!","billy"),Object(c.__)("Date","billy")))))),Object(a.createElement)(b.Disabled,null,Object(a.createElement)(i.a,{block:"billy-blocks/invoice-date"})))},save:function(e){return null}}),Object(n.registerBlockType)("billy-blocks/invoice-duedate",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Invoice","billy"),Object(c.__)("Due Date","billy")),icon:"calendar-alt",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Info","billy")},Object(a.createElement)("div",{className:"components-notice"},Object(a.createElement)("div",{className:"components-notice__content"},Object(c.sprintf)(Object(c.__)("The %s values can be modified in the Theme Customizer.","billy"),Object(c.__)("Payment due days","billy")))))),Object(a.createElement)(b.Disabled,null,Object(a.createElement)(i.a,{block:"billy-blocks/invoice-duedate"})))},save:function(e){return null}}),Object(n.registerBlockType)("billy-blocks/invoice-number",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Invoice","billy"),Object(c.__)("Number","billy")),icon:"editor-ol",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Info","billy")},Object(a.createElement)("div",{className:"components-notice"},Object(a.createElement)("div",{className:"components-notice__content"},Object(c.sprintf)(Object(c.__)("The %s values can be modified in the Theme Customizer.","billy"),Object(c.__)("Invoice number: Prefix","billy")))),Object(a.createElement)("div",{className:"components-notice is-warning"},Object(a.createElement)("div",{className:"components-notice__content"},Object(c.sprintf)(Object(c.__)("Due to legal requirements in some countries, autogenerated data like %s can't be modified anymore after an invoice has been created in the system!","billy"),Object(c.__)("Invoice number","billy")))))),Object(a.createElement)(b.Disabled,null,Object(a.createElement)(i.a,{block:"billy-blocks/invoice-number"})))},save:function(e){return null}}),Object(n.registerBlockType)("billy-blocks/invoice-paymentinformation",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Invoice","billy"),Object(c.__)("Payment Information","billy")),icon:"info",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Info","billy")},Object(a.createElement)("div",{className:"components-notice"},Object(a.createElement)("div",{className:"components-notice__content"},Object(c.sprintf)(Object(c.__)("The %s values can be modified in the Theme Customizer.","billy"),Object(c.__)("Payment Information","billy")))))),Object(a.createElement)(b.Disabled,null,Object(a.createElement)(i.a,{block:"billy-blocks/invoice-paymentinformation"})))},save:function(e){return null}});var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e.toLocaleString(t,{minimumFractionDigits:2,maximumFractionDigits:2})},m=function(e){return parseFloat(e)/100},O=function(e){return e=new Date(e)||new Date,[1,2,3,4][Math.floor(e.getMonth()/3)]},j=[{attributes:{currency:{type:"string",default:""},locale:{type:"string",default:""},amountSubtotal:{type:"number",default:""},amountTotal:{type:"number",default:""},taxRates:{type:"string",default:""},taxRatesTotal:{type:"number",default:""}},save:function(e){var t=e.className,l=e.attributes,n=l.currency,b=l.locale,s=l.amountSubtotal,i=l.amountTotal,o=l.taxRates,O=l.taxRatesTotal;return Object(a.createElement)("div",{className:"invoicetable-block alignwide"+(t?" "+t:"")},Object(a.createElement)("table",{className:"table wp-block-table"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"col"},Object(c.__)("#","billy")),Object(a.createElement)("th",{scope:"col"},Object(c.__)("Description","billy")),Object(a.createElement)("th",{scope:"col"},Object(c.__)("Amount","billy")),o&&O>0&&Object(a.createElement)("th",{scope:"col"},Object(c.__)("Tax","billy")))),Object(a.createElement)("tbody",null,Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("tfoot",null,s>0&&Object(a.createElement)("tr",{className:"subtotal"},Object(a.createElement)("td",{colSpan:"2",align:"right"},i>s?Object(c.__)("Subtotal","billy"):Object(c.__)("Total","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s,b)))),o&&O>0&&Object(a.createElement)("tr",{className:"taxrates"},Object(a.createElement)("td",{colSpan:"2",align:"right"},Object(c.__)("Tax","billy")),Object(a.createElement)("td",null,JSON.parse(o).sort((function(e,t){return m(e.taxRate)-m(t.taxRate)})).map((function(e,t){if(e.amount>0)return Object(a.createElement)(a.RawHTML,{key:t},Object(c.sprintf)(Object(c.__)("%1$s %2$s %3$s","billy"),n,u(e.amount,b),"<small>("+e.taxRate+")</small><br>"))})))),i>s&&Object(a.createElement)("tr",{className:"total"},Object(a.createElement)("td",{colSpan:"2",align:"right"},Object(c.__)("Total","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(i,b)))))))}}],d=[{attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},description:{type:"string",default:""},taxRate:{type:"string",default:""},amount:{type:"number",default:""},amountIncl:{type:"number",default:""},quantity:{type:"number",default:""},quantityRate:{type:"number",default:""}},save:function(e){e.className;var t=e.attributes,l=t.index,n=t.locale,r=t.description,b=t.taxRate,s=t.amount;return Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"row"},l&&l),Object(a.createElement)("td",null,r&&Object(a.createElement)(a.RawHTML,null,r)),Object(a.createElement)("td",null,s&&u(s,n)),b&&m(b)*s>0&&Object(a.createElement)("td",null,Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),u(m(b)*s,n),"<small>("+b+")</small>"))))}}];Object(n.registerBlockType)("billy-blocks/invoice-table",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Invoice","billy"),Object(c.__)("Table","billy")),icon:"menu-alt",category:"billy-blocks",attributes:{currency:{type:"string",default:""},locale:{type:"string",default:""},amountSubtotal:{type:"number",default:""},amountTotal:{type:"number",default:""},taxRates:{type:"string",default:""},taxRatesTotal:{type:"number",default:""}},supports:{inserter:!1,reusable:!1,html:!1},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:Object(o.withSelect)((function(e,t){var l=t.clientId,a=e("core/block-editor").getBlocksByClientId;return globalDataBilly.clientId=l,{childBlocks:null!==a(globalDataBilly.clientId)[0]?a(globalDataBilly.clientId)[0].innerBlocks:null}}))((function(e){var t=e.className,l=e.childBlocks,n=e.attributes,b=n.currency,s=n.locale,i=n.amountSubtotal,o=n.amountTotal,O=n.taxRates,j=n.taxRatesTotal,d=e.setAttributes;d({currency:globalDataBilly.currency}),d({locale:globalDataBilly.locale});var y=function(){var e=0,t=0,a=0,n=[],c=[];l&&l.length>0&&(l.map((function(l,a){e+=Number(l.attributes.amount),t+=Number(l.attributes.amount)+m(l.attributes.taxRate)*Number(l.attributes.amount),n.push({taxRate:l.attributes.taxRate,amount:m(l.attributes.taxRate)*Number(l.attributes.amount)})})),n.length>0&&(a=n.reduce((function(e,t){return e+t.amount}),0),a=Number(a.toFixed(2)),n.reduce((function(e,t){return e[t.taxRate]||(e[t.taxRate]={taxRate:t.taxRate,amount:0},c.push(e[t.taxRate])),e[t.taxRate].amount+=t.amount,e}),{})),d({taxRatesTotal:a}),d({taxRates:JSON.stringify(c)}),d({amountSubtotal:e}),d({amountTotal:t}))};return y(),Object(a.createElement)("div",{className:"invoicetable-block"+(t?" "+t:"")},Object(a.createElement)(r.InnerBlocks,{templateLock:!1,template:[["billy-blocks/invoice-tablerow",{}]],allowedBlocks:["billy-blocks/invoice-tablerow"]}),i>0&&Object(a.createElement)("table",{className:"totals"},Object(a.createElement)("tbody",null,i>0&&Object(a.createElement)("tr",{className:"subtotal"},Object(a.createElement)("td",{style:{width:"50%"}},o>i?Object(c.__)("Subtotal","billy"):Object(c.__)("Total","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),b,u(i,s)))),O&&j>0&&Object(a.createElement)("tr",{className:"taxRates"},Object(a.createElement)("td",{style:{width:"50%"}},Object(c.__)("Tax","billy")),Object(a.createElement)("td",null,JSON.parse(O).sort((function(e,t){return m(e.taxRate)-m(t.taxRate)})).map((function(e,t){if(e.amount>0)return Object(a.createElement)(a.RawHTML,{key:t},Object(c.sprintf)(Object(c.__)("%1$s %2$s %3$s","billy"),b,u(e.amount,s),"<small>("+e.taxRate+")</small><br>"))})))),o>i&&Object(a.createElement)("tr",{className:"total"},Object(a.createElement)("td",{style:{width:"50%"}},Object(c.__)("Total","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),b,u(o,s)))))),Object(a.createElement)("button",{id:"updatetotals",className:"components-button is-secondary is-button",onClick:y,style:{display:i>0?"block":"none"}},Object(c.__)("Update Totals","billy")))})),save:function(e){var t=e.className,l=e.attributes,n=l.currency,b=l.locale,s=l.amountSubtotal,i=l.amountTotal,o=l.taxRates,O=l.taxRatesTotal;return Object(a.createElement)("div",{className:"invoicetable-block alignwide"+(t?" "+t:"")},Object(a.createElement)("table",{className:"table wp-block-table"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"col"},Object(c.__)("#","billy")),Object(a.createElement)("th",{scope:"col"},Object(c.__)("Description","billy")),Object(a.createElement)("th",{scope:"col"},Object(c.__)("Amount","billy")),o&&O>0&&Object(a.createElement)("th",{scope:"col"},Object(c.__)("Tax","billy")))),Object(a.createElement)("tbody",null,Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("tfoot",null,s>0&&Object(a.createElement)("tr",{className:"subtotal"},Object(a.createElement)("td",{colSpan:"2",className:"align-right"},i>s?Object(c.__)("Subtotal","billy"):Object(c.__)("Total","billy")),Object(a.createElement)("td",{colSpan:o&&O>0?"2":null},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s,b)))),o&&O>0&&Object(a.createElement)("tr",{className:"taxrates"},Object(a.createElement)("td",{colSpan:"2",className:"align-right"},Object(c.__)("Tax","billy")),Object(a.createElement)("td",{colSpan:o&&O>0?"2":null},JSON.parse(o).sort((function(e,t){return m(e.taxRate)-m(t.taxRate)})).map((function(e,t){if(e.amount>0)return Object(a.createElement)(a.RawHTML,{key:t},Object(c.sprintf)(Object(c.__)("%1$s %2$s %3$s","billy"),n,u(e.amount,b),"<small>("+e.taxRate+")</small><br>"))})))),i>s&&Object(a.createElement)("tr",{className:"total"},Object(a.createElement)("td",{colSpan:"2",className:"align-right"},Object(c.__)("Total","billy")),Object(a.createElement)("td",{colSpan:o&&O>0?"2":null},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(i,b)))))))},deprecated:j}),Object(n.registerBlockType)("billy-blocks/invoice-tablerow",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Invoice","billy"),Object(c.__)("Table Row","billy")),icon:"menu-alt",category:"billy-blocks",parent:["billy-blocks/invoice-table"],attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},taxRate:{type:"string",default:""},amount:{type:"number",default:""},amountIncl:{type:"number",default:""},quantity:{type:"number",default:""},quantityRate:{type:"number",default:""}},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:Object(o.withSelect)((function(e,t){var l=t.clientId,a=e("core/block-editor"),n=a.getBlockRootClientId;return{i:(0,a.getBlockIndex)(l,n(l))+1}}))((function(e){e.className;var t=e.i,l=e.attributes,n=l.index,s=l.currency,i=(l.locale,l.description),o=l.taxRate,u=l.amount,O=l.amountIncl,j=l.quantity,d=l.quantityRate,y=e.setAttributes;y({index:t}),y({currency:globalDataBilly.currency}),y({locale:globalDataBilly.locale}),""===o&&y({taxRate:0===globalDataBilly.taxOptions.length?"0%":globalDataBilly.taxOptions[0].value});var p=function(e){y({amountIncl:e>0?Number(e):""}),setTimeout((function(){document.getElementById("updatetotals").click()}),1)},_=function(e){y({amount:e>0?Number(e):""}),p(Number(e)+Number(e)*m(o))};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Quantity/Rate Calculator","billy")},Object(a.createElement)(b.TextControl,{type:"number",label:Object(c.__)("Quantity","billy"),placeholder:Object(c.__)("0","billy"),value:j,onChange:function(e){y({quantity:e>0?Number(e):""}),_(Number(e)*Number(d))}}),Object(a.createElement)(b.TextControl,{type:"number",label:Object(c.sprintf)(Object(c.__)("%1$s in %2$s","billy"),Object(c.__)("Rate","billy"),s),placeholder:Object(c.__)("0","billy"),value:d,onChange:function(e){y({quantityRate:e>0?Number(e):""}),_(Number(j)*Number(e))}}))),Object(a.createElement)("table",null,Object(a.createElement)("tbody",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{className:"index"},n&&n),Object(a.createElement)("td",{style:{width:"30vw",minWidth:"200px"}},Object(a.createElement)(r.InnerBlocks,{template:[["core/paragraph",{placeholder:Object(c.__)("Add content","billy"),content:i||""}]],allowedBlocks:["core/heading","core/paragraph","core/list","core/html"]})),Object(a.createElement)("td",null,Object(a.createElement)(b.TextControl,{type:"number",label:Object(c.sprintf)(Object(c.__)("%1$s in %2$s","billy"),Object(c.__)("Amount","billy"),s),className:"amount",placeholder:Object(c.__)("0","billy"),value:u,onChange:_})),Object(a.createElement)("td",null,Object(a.createElement)(b.SelectControl,{className:"taxrate",label:Object(c.sprintf)(Object(c.__)("%1$s in %2$s","billy"),Object(c.__)("Tax","billy"),"%"),value:o,options:0!==globalDataBilly.taxOptions.length?globalDataBilly.taxOptions:"0%"!==o&&0===globalDataBilly.taxOptions.length?[{label:o,value:o},{label:"0%",value:"0%"}]:"",onChange:function(e){y({taxRate:e}),p(Number(u)+Number(u)*m(e))}})),Object(a.createElement)("td",null,Object(a.createElement)(b.TextControl,{type:"number",disabled:"disabled",label:s,className:"amount-tax",placeholder:Object(c.__)("0","billy"),value:O}))))))})),save:function(e){e.className;var t=e.attributes,l=t.index,n=t.locale,b=t.taxRate,s=t.amount;return Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"row"},l&&l),Object(a.createElement)("td",null,Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("td",null,s&&u(s,n)),b&&m(b)*s>0&&Object(a.createElement)("td",null,Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),u(m(b)*s,n),"<small>("+b+")</small>"))))},deprecated:d}),Object(n.registerBlockType)("billy-blocks/quote-actions",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Quote","billy"),Object(c.__)("Actions","billy")),icon:"menu-alt",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:Object(o.withSelect)((function(e){return{postModifiedDate:e("core/editor").getEditedPostAttribute("modified")}}))((function(e){var t=e.postModifiedDate;return Object(a.createElement)("div",{className:"components-placeholder",style:{minHeight:"auto"}},Object(a.createElement)("small",null,Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Last modified","billy"),new Date(t).toLocaleString())))})),save:function(e){return null}}),Object(n.registerBlockType)("billy-blocks/quote-meta",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Quote","billy"),Object(c.__)("Meta","billy")),icon:"editor-textcolor",category:"billy-blocks",attributes:{label:{type:"string",default:""},text:{type:"string",default:""}},supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){e.className;var t=e.attributes,l=t.label,n=t.text,s=e.setAttributes;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Label","billy")},Object(a.createElement)(b.TextControl,{type:"text",className:"label",value:l,onChange:function(e){s({label:e})}})),Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Text","billy")},Object(a.createElement)(b.TextControl,{type:"text",className:"text",value:n,onChange:function(e){s({text:e})}}))),Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)(Object(c.__)('<div class="label">%1$s</div> <div class="text">%2$s</div>',"billy"),l||"",n||Object(c.__)("N/A","billy"))))},save:function(e){e.className;var t=e.attributes,l=t.label,n=t.text;return n&&Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)(Object(c.__)('<div class="label">%1$s</div> <div class="text">%2$s</div>',"billy"),l||"",n||Object(c.__)("N/A","billy")))},deprecated:[{attributes:{label:{type:"string",default:""},text:{type:"string",default:""}},save:function(e){e.className;var t=e.attributes,l=t.label,n=t.text;return n&&Object(a.createElement)("p",null,Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)("<p>"+Object(c.__)("<strong>%1$s</strong> <span>%2$s</span>","billy")+"</p>",l||"",n||Object(c.__)("N/A","billy"))))}}]}),Object(n.registerBlockType)("billy-blocks/quote-date",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Quote","billy"),Object(c.__)("Date","billy")),icon:"calendar-alt",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){return Object(a.createElement)(i.a,{block:"billy-blocks/quote-date"})},save:function(e){return null}}),Object(n.registerBlockType)("billy-blocks/quote-information",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Quote","billy"),Object(c.__)("Information","billy")),icon:"info",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Info","billy")},Object(a.createElement)("div",{className:"components-notice"},Object(a.createElement)("div",{className:"components-notice__content"},Object(c.sprintf)(Object(c.__)("The %s values can be modified in the Theme Customizer.","billy"),Object(c.__)("Quote Information","billy")))))),Object(a.createElement)(i.a,{block:"billy-blocks/quote-information"}))},save:function(e){return null}});var y=[{attributes:{currency:{type:"string",default:""},locale:{type:"string",default:""},amountSubtotal:{type:"number",default:""},amountTotal:{type:"number",default:""},taxRates:{type:"string",default:""},taxRatesTotal:{type:"number",default:""}},save:function(e){var t=e.className,l=e.attributes,n=l.currency,b=l.locale,s=l.amountSubtotal,i=l.amountTotal,o=l.taxRates,O=l.taxRatesTotal;return Object(a.createElement)("div",{className:"quotetable-block alignwide"+(t?" "+t:"")},Object(a.createElement)("table",{className:"table wp-block-table"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"col"},Object(c.__)("#","billy")),Object(a.createElement)("th",{scope:"col"},Object(c.__)("Description","billy")),Object(a.createElement)("th",{scope:"col"},Object(c.__)("Amount","billy")),o&&O>0&&Object(a.createElement)("th",{scope:"col"},Object(c.__)("Tax","billy")))),Object(a.createElement)("tbody",null,Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("tfoot",null,s>0&&Object(a.createElement)("tr",{className:"subtotal"},Object(a.createElement)("td",{colSpan:"2",align:"right"},i>s?Object(c.__)("Subtotal","billy"):Object(c.__)("Total","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s,b)))),o&&O>0&&Object(a.createElement)("tr",{className:"taxrates"},Object(a.createElement)("td",{colSpan:"2",align:"right"},Object(c.__)("Tax","billy")),Object(a.createElement)("td",null,JSON.parse(o).sort((function(e,t){return m(e.taxRate)-m(t.taxRate)})).map((function(e,t){if(e.amount>0)return Object(a.createElement)(a.RawHTML,{key:t},Object(c.sprintf)(Object(c.__)("%1$s %2$s %3$s","billy"),n,u(e.amount,b),"<small>("+e.taxRate+")</small><br>"))})))),i>s&&Object(a.createElement)("tr",{className:"total"},Object(a.createElement)("td",{colSpan:"2",align:"right"},Object(c.__)("Total","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(i,b)))))))}}],p=[{attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},description:{type:"string",default:""},taxRate:{type:"string",default:""},amount:{type:"number",default:""},amountIncl:{type:"number",default:""},quantity:{type:"number",default:""},quantityRate:{type:"number",default:""}},save:function(e){e.className;var t=e.attributes,l=t.index,n=t.locale,r=t.description,b=t.taxRate,s=t.amount;return Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"row"},l&&l),Object(a.createElement)("td",null,r&&Object(a.createElement)(a.RawHTML,null,r)),Object(a.createElement)("td",null,s&&u(s,n)),b&&m(b)*s>0&&Object(a.createElement)("td",null,Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),u(m(b)*s,n),"<small>("+b+")</small>"))))}}];Object(n.registerBlockType)("billy-blocks/quote-table",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Quote","billy"),Object(c.__)("Table","billy")),icon:"menu-alt",category:"billy-blocks",attributes:{currency:{type:"string",default:""},locale:{type:"string",default:""},amountSubtotal:{type:"number",default:""},amountTotal:{type:"number",default:""},taxRates:{type:"string",default:""},taxRatesTotal:{type:"number",default:""}},supports:{inserter:!1,reusable:!1,html:!1},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:Object(o.withSelect)((function(e,t){var l=t.clientId,a=e("core/block-editor").getBlocksByClientId;return globalDataBilly.clientId=l,{childBlocks:null!==a(globalDataBilly.clientId)[0]?a(globalDataBilly.clientId)[0].innerBlocks:null}}))((function(e){var t=e.className,l=e.childBlocks,n=e.attributes,b=n.currency,s=n.locale,i=n.amountSubtotal,o=n.amountTotal,O=n.taxRates,j=n.taxRatesTotal,d=e.setAttributes;d({currency:globalDataBilly.currency}),d({locale:globalDataBilly.locale});var y=function(){var e=0,t=0,a=0,n=[],c=[];l&&l.length>0&&(l.map((function(l,a){e+=Number(l.attributes.amount),t+=Number(l.attributes.amount)+m(l.attributes.taxRate)*Number(l.attributes.amount),n.push({taxRate:l.attributes.taxRate,amount:m(l.attributes.taxRate)*Number(l.attributes.amount)})})),n.length>0&&(a=n.reduce((function(e,t){return e+t.amount}),0),a=Number(a.toFixed(2)),n.reduce((function(e,t){return e[t.taxRate]||(e[t.taxRate]={taxRate:t.taxRate,amount:0},c.push(e[t.taxRate])),e[t.taxRate].amount+=t.amount,e}),{})),d({taxRatesTotal:a}),d({taxRates:JSON.stringify(c)}),d({amountSubtotal:e}),d({amountTotal:t}))};return y(),Object(a.createElement)("div",{className:"quotetable-block"+(t?" "+t:"")},Object(a.createElement)(r.InnerBlocks,{templateLock:!1,template:[["billy-blocks/quote-tablerow",{}]],allowedBlocks:["billy-blocks/quote-tablerow"]}),i>0&&Object(a.createElement)("table",{className:"totals"},Object(a.createElement)("tbody",null,i>0&&Object(a.createElement)("tr",{className:"subtotal"},Object(a.createElement)("td",{style:{width:"50%"}},o>i?Object(c.__)("Subtotal","billy"):Object(c.__)("Total","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),b,u(i,s)))),O&&j>0&&Object(a.createElement)("tr",{className:"taxRates"},Object(a.createElement)("td",{style:{width:"50%"}},Object(c.__)("Tax","billy")),Object(a.createElement)("td",null,JSON.parse(O).sort((function(e,t){return m(e.taxRate)-m(t.taxRate)})).map((function(e,t){if(e.amount>0)return Object(a.createElement)(a.RawHTML,{key:t},Object(c.sprintf)(Object(c.__)("%1$s %2$s %3$s","billy"),b,u(e.amount,s),"<small>("+e.taxRate+")</small><br>"))})))),o>i&&Object(a.createElement)("tr",{className:"total"},Object(a.createElement)("td",{style:{width:"50%"}},Object(c.__)("Total","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),b,u(o,s)))))),Object(a.createElement)("button",{id:"updatetotals",className:"components-button is-secondary is-button",onClick:y,style:{display:i>0?"block":"none"}},Object(c.__)("Update Totals","billy")))})),save:function(e){var t=e.className,l=e.attributes,n=l.currency,b=l.locale,s=l.amountSubtotal,i=l.amountTotal,o=l.taxRates,O=l.taxRatesTotal;return Object(a.createElement)("div",{className:"quotetable-block alignwide"+(t?" "+t:"")},Object(a.createElement)("table",{className:"table wp-block-table"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"col"},Object(c.__)("#","billy")),Object(a.createElement)("th",{scope:"col"},Object(c.__)("Description","billy")),Object(a.createElement)("th",{scope:"col"},Object(c.__)("Amount","billy")),o&&O>0&&Object(a.createElement)("th",{scope:"col"},Object(c.__)("Tax","billy")))),Object(a.createElement)("tbody",null,Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("tfoot",null,s>0&&Object(a.createElement)("tr",{className:"subtotal"},Object(a.createElement)("td",{colSpan:"2",className:"align-right"},i>s?Object(c.__)("Subtotal","billy"):Object(c.__)("Total","billy")),Object(a.createElement)("td",{colSpan:o&&O>0?"2":null},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s,b)))),o&&O>0&&Object(a.createElement)("tr",{className:"taxrates"},Object(a.createElement)("td",{colSpan:"2",className:"align-right"},Object(c.__)("Tax","billy")),Object(a.createElement)("td",{colSpan:o&&O>0?"2":null},JSON.parse(o).sort((function(e,t){return m(e.taxRate)-m(t.taxRate)})).map((function(e,t){if(e.amount>0)return Object(a.createElement)(a.RawHTML,{key:t},Object(c.sprintf)(Object(c.__)("%1$s %2$s %3$s","billy"),n,u(e.amount,b),"<small>("+e.taxRate+")</small><br>"))})))),i>s&&Object(a.createElement)("tr",{className:"total"},Object(a.createElement)("td",{colSpan:"2",className:"align-right"},Object(c.__)("Total","billy")),Object(a.createElement)("td",{colSpan:o&&O>0?"2":null},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(i,b)))))))},deprecated:y}),Object(n.registerBlockType)("billy-blocks/quote-tablerow",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Quote","billy"),Object(c.__)("Table Row","billy")),icon:"menu-alt",category:"billy-blocks",parent:["billy-blocks/quote-table"],attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},taxRate:{type:"string",default:""},amount:{type:"number",default:""},amountIncl:{type:"number",default:""},quantity:{type:"number",default:""},quantityRate:{type:"number",default:""}},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:Object(o.withSelect)((function(e,t){var l=t.clientId,a=e("core/block-editor"),n=a.getBlockRootClientId;return{i:(0,a.getBlockIndex)(l,n(l))+1}}))((function(e){e.className;var t=e.i,l=e.attributes,n=l.index,s=l.currency,i=(l.locale,l.description),o=l.taxRate,u=l.amount,O=l.amountIncl,j=l.quantity,d=l.quantityRate,y=e.setAttributes;y({index:t}),y({currency:globalDataBilly.currency}),y({locale:globalDataBilly.locale}),""===o&&y({taxRate:0===globalDataBilly.taxOptions.length?"0%":globalDataBilly.taxOptions[0].value});var p=function(e){y({amountIncl:e>0?Number(e):""}),setTimeout((function(){document.getElementById("updatetotals").click()}),1)},_=function(e){y({amount:e>0?Number(e):""}),p(Number(e)+Number(e)*m(o))};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Quantity/Rate Calculator","billy")},Object(a.createElement)(b.TextControl,{type:"number",label:Object(c.__)("Quantity","billy"),placeholder:Object(c.__)("0","billy"),value:j,onChange:function(e){y({quantity:e>0?Number(e):""}),_(Number(e)*Number(d))}}),Object(a.createElement)(b.TextControl,{type:"number",label:Object(c.sprintf)(Object(c.__)("%1$s in %2$s","billy"),Object(c.__)("Rate","billy"),s),placeholder:Object(c.__)("0","billy"),value:d,onChange:function(e){y({quantityRate:e>0?Number(e):""}),_(Number(j)*Number(e))}}))),Object(a.createElement)("table",null,Object(a.createElement)("tbody",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{className:"index"},n&&n),Object(a.createElement)("td",{style:{width:"30vw",minWidth:"200px"}},Object(a.createElement)(r.InnerBlocks,{template:[["core/paragraph",{placeholder:Object(c.__)("Add content","billy"),content:i||""}]],allowedBlocks:["core/heading","core/paragraph","core/list","core/html"]})),Object(a.createElement)("td",null,Object(a.createElement)(b.TextControl,{type:"number",label:Object(c.sprintf)(Object(c.__)("%1$s in %2$s","billy"),Object(c.__)("Amount","billy"),s),className:"amount",placeholder:Object(c.__)("0","billy"),value:u,onChange:_})),Object(a.createElement)("td",null,Object(a.createElement)(b.SelectControl,{className:"taxrate",label:Object(c.sprintf)(Object(c.__)("%1$s in %2$s","billy"),Object(c.__)("Tax","billy"),"%"),value:o,options:0!==globalDataBilly.taxOptions.length?globalDataBilly.taxOptions:"0%"!==o&&0===globalDataBilly.taxOptions.length?[{label:o,value:o},{label:"0%",value:"0%"}]:"",onChange:function(e){y({taxRate:e}),p(Number(u)+Number(u)*m(e))}})),Object(a.createElement)("td",null,Object(a.createElement)(b.TextControl,{type:"number",disabled:"disabled",label:s,className:"amount-tax",placeholder:Object(c.__)("0","billy"),value:O}))))))})),save:function(e){e.className;var t=e.attributes,l=t.index,n=t.locale,b=t.taxRate,s=t.amount;return Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"row"},l&&l),Object(a.createElement)("td",null,Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("td",null,s&&u(s,n)),b&&m(b)*s>0&&Object(a.createElement)("td",null,Object(a.createElement)(a.RawHTML,null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),u(m(b)*s,n),"<small>("+b+")</small>"))))},deprecated:p}),Object(n.registerBlockType)("billy-blocks/quote-validuntildate",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Quote","billy"),Object(c.__)("Valid Until","billy")),icon:"calendar-alt",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},edit:function(e){return Object(a.createElement)(i.a,{block:"billy-blocks/quote-validuntildate"})},save:function(e){return null}});var _,E=[{attributes:{currency:{type:"string",default:""},locale:{type:"string",default:""},amountTotalEarnings:{type:"number",default:""},amountTotalExpenses:{type:"number",default:""},amountTaxEarnings:{type:"number",default:""},amountTaxExpenses:{type:"number",default:""}},save:function(e){var t=e.className,l=e.attributes,n=l.currency,b=l.locale,s=l.amountTotalEarnings,i=l.amountTotalExpenses,o=l.amountTaxEarnings,m=l.amountTaxExpenses;return Object(a.createElement)("div",{className:"alignwide"+(t?" "+t:"")},Object(a.createElement)("table",{className:"table wp-block-table"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"index"},Object(c.__)("#","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"date"},Object(c.__)("Date","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"description"},Object(c.__)("Description","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"reference"},Object(c.__)("Reference","billy")),Object(a.createElement)("th",{scope:"col",className:"sort earnings","data-sort":"earning"},Object(c.__)("Earnings","billy")),Object(a.createElement)("th",{scope:"col",className:"sort expenses","data-sort":"expense"},Object(c.__)("Expenses","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"tax"},Object(c.__)("Tax","billy")))),Object(a.createElement)("tbody",{className:"list"},Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("tfoot",null,(s>0||i>0)&&Object(a.createElement)("tr",null,Object(a.createElement)("td",{colSpan:"4",align:"right"},Object(c.sprintf)(Object(c.__)("%1$s / %2$s","billy"),Object(c.__)("Earnings","billy"),Object(c.__)("Expenses","billy"))),Object(a.createElement)("td",{className:"sum earnings"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s,b))),Object(a.createElement)("td",{className:"sum expenses"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(i,b)))),(s>0||i>0)&&Object(a.createElement)("tr",null,Object(a.createElement)("td",{colSpan:"4",align:"right"},Object(c.__)("Profit","billy")),Object(a.createElement)("td",{colSpan:"2",className:"profit"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s-i,b)))),(o>0||m>0)&&Object(a.createElement)("tr",null,Object(a.createElement)("td",{colSpan:"4",align:"right"},Object(c.sprintf)(Object(c.__)("%1$s (%2$s / %3$s)","billy"),Object(c.__)("Taxes","billy"),Object(c.__)("Earnings","billy"),Object(c.__)("Expenses","billy"))),Object(a.createElement)("td",{className:"sum tax-earnings"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(o,b))),Object(a.createElement)("td",{className:"sum tax-expenses"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(m,b)))))))}},{attributes:{currency:{type:"string",default:""},locale:{type:"string",default:""},amountTotalEarnings:{type:"number",default:""},amountTotalExpenses:{type:"number",default:""},amountTaxEarnings:{type:"number",default:""},amountTaxExpenses:{type:"number",default:""}},save:function(e){var t=e.className,l=e.attributes,n=l.currency,b=l.locale,s=l.amountTotalEarnings,i=l.amountTotalExpenses,o=l.amountTaxEarnings,m=l.amountTaxExpenses;return Object(a.createElement)("div",{className:"alignwide"+(t?" "+t:"")},Object(a.createElement)("table",{className:"table wp-block-table"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"index"},Object(c.__)("#","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"date"},Object(c.__)("Date","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"description"},Object(c.__)("Description","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"reference"},Object(c.__)("Reference","billy")),Object(a.createElement)("th",{scope:"col",className:"sort earnings","data-sort":"earning"},Object(c.__)("Earning","billy")),Object(a.createElement)("th",{scope:"col",className:"sort expenses","data-sort":"expense"},Object(c.__)("Expense","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"tax"},Object(c.__)("Tax","billy")))),Object(a.createElement)("tbody",{className:"list"},Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("tfoot",null,(s>0||i>0)&&Object(a.createElement)("tr",null,Object(a.createElement)("td",{colSpan:"4",align:"right"},Object(c.sprintf)(Object(c.__)("%1$s / %2$s","billy"),Object(c.__)("Earnings","billy"),Object(c.__)("Expenses","billy"))),Object(a.createElement)("td",{className:"sum earnings"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s,b))),Object(a.createElement)("td",{className:"sum expenses"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(i,b)))),(s>0||i>0)&&Object(a.createElement)("tr",null,Object(a.createElement)("td",{colSpan:"4",align:"right"},Object(c.__)("Profit","billy")),Object(a.createElement)("td",{colSpan:"2",className:"profit"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s-i,b)))),(o>0||m>0)&&Object(a.createElement)("tr",null,Object(a.createElement)("td",{colSpan:"4",align:"right"},Object(c.sprintf)(Object(c.__)("%1$s (%2$s / %3$s)","billy"),Object(c.__)("Taxes","billy"),Object(c.__)("Earnings","billy"),Object(c.__)("Expenses","billy"))),Object(a.createElement)("td",{className:"sum tax-earnings"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(o,b))),Object(a.createElement)("td",{className:"sum tax-expenses"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(m,b)))))))}}],f=[{attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},date:{type:"string",default:""},quarter:{type:"number",default:""},reference:{type:"string",default:""},description:{type:"string",default:""},earning:{type:"number",default:""},expense:{type:"number",default:""},tax:{type:"number",default:""},postUUID:{type:"string",default:""},postTitle:{type:"string",default:""},postLink:{type:"string",default:""},postType:{type:"string",default:""}},save:function(e){e.className;var t=e.attributes,l=t.index,n=t.locale,r=t.date,b=t.quarter,s=t.description,i=t.earning,o=t.expense,m=t.tax,O=t.reference,j=t.postLink;return Object(a.createElement)("tr",{"data-date":r&&new Date(r).toISOString().substring(0,10),"data-quarter":b&&Object(c.sprintf)(Object(c.__)("Q%s","billy"),b),"data-reference":O&&O,"data-earning":i>0?i:null,"data-expense":o>0?o:null,"data-tax":m>0?m:null},Object(a.createElement)("th",{className:"index",scope:"row"},l&&l),Object(a.createElement)("td",{className:"date","data-value":r&&new Date(r).toISOString().substring(0,10)},r&&new Date(r).toISOString().substring(0,10),Object(a.createElement)("sub",null,b&&Object(c.sprintf)(Object(c.__)("Q%s","billy"),b))),Object(a.createElement)("td",{className:"description"},s&&s),Object(a.createElement)("td",{className:"reference"},O&&!j&&O,O&&j&&Object(a.createElement)("a",{href:j},O)),Object(a.createElement)("td",{className:"amount earning","data-value":i>0?i:null},i&&i>0&&u(i,n)),Object(a.createElement)("td",{className:"amount expense","data-value":o>0?o:null},o&&o>0&&u(o,n)),Object(a.createElement)("td",{className:"amount tax","data-value":m>0?m:null},m&&m>0&&u(m,n)))}}];Object(n.registerBlockType)("billy-blocks/accounting-table",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Accounting","billy"),Object(c.__)("Table","billy")),icon:"menu-alt",category:"billy-blocks",attributes:{currency:{type:"string",default:""},locale:{type:"string",default:""},amountTotalEarnings:{type:"number",default:""},amountTotalExpenses:{type:"number",default:""},amountTaxEarnings:{type:"number",default:""},amountTaxExpenses:{type:"number",default:""}},supports:{inserter:!1,reusable:!1,html:!1},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:Object(o.withSelect)((function(e,t){var l=t.clientId,a=e("core/block-editor").getBlocksByClientId;globalDataBilly.clientId=l;var n=a(l)[0].innerBlocks;return n.sort((function(e,t){return new Date(e.attributes.date)-new Date(t.attributes.date)})),{childBlocks:n}}))((function(e){var t=e.className,l=e.childBlocks,n=e.attributes,s=n.currency,i=n.locale,o=n.amountTotalEarnings,m=n.amountTotalExpenses,O=n.amountTaxEarnings,j=n.amountTaxExpenses,d=e.setAttributes;return d({currency:globalDataBilly.currency}),d({locale:globalDataBilly.locale}),(_=function(){var e=0,t=0,a=0,n=0;l&&l.length>0&&l.forEach((function(l){e+=Number(l.attributes.earning),t+=Number(l.attributes.expense),l.attributes.earning&&(a+=Number(l.attributes.tax)),l.attributes.expense&&(n+=Number(l.attributes.tax))})),d({amountTotalEarnings:e}),d({amountTotalExpenses:t}),d({amountTaxEarnings:a}),d({amountTaxExpenses:n})})(),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Actions","billy")},Object(a.createElement)("button",{id:"updatetotals",className:"components-button is-secondary is-button",onClick:_},Object(c.__)("Update Totals","billy")))),Object(a.createElement)("div",{className:"accountingtable-block"+(t?" "+t:"")},Object(a.createElement)(r.InnerBlocks,{templateLock:!1,template:[["billy-blocks/accounting-tablerow",{}]],allowedBlocks:["billy-blocks/accounting-tablerow"]}),Object(a.createElement)("table",{className:"totals"},Object(a.createElement)("tbody",null,o>0&&Object(a.createElement)("tr",{className:"earnings"},Object(a.createElement)("td",{style:{width:"50%"}},Object(c.__)("Earnings","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),s,u(o,i)))),m>0&&Object(a.createElement)("tr",{className:"expenses"},Object(a.createElement)("td",{style:{width:"50%"}},Object(c.__)("Expenses","billy")),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),s,u(m,i)))),(o>0||m>0)&&Object(a.createElement)("tr",{className:"profit"},Object(a.createElement)("td",{style:{width:"50%"}},Object(c.__)("Profit","billy")),Object(a.createElement)("td",{style:{borderTop:"2px solid"}},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),s,u(o-m,i)))),(O>0||j>0)&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("tr",{className:"taxes-earnings"},Object(a.createElement)("td",{style:{width:"50%"}},Object(c.sprintf)(Object(c.__)("Taxes (%s)","billy"),Object(c.__)("Earnings","billy"))),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),s,u(O,i)))),Object(a.createElement)("tr",{className:"taxes-expenses"},Object(a.createElement)("td",{style:{width:"50%"}},Object(c.sprintf)(Object(c.__)("Taxes (%s)","billy"),Object(c.__)("Expenses","billy"))),Object(a.createElement)("td",null,Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),s,u(j,i)))))))))})),save:function(e){var t=e.className,l=e.attributes,n=l.currency,b=l.locale,s=l.amountTotalEarnings,i=l.amountTotalExpenses,o=l.amountTaxEarnings,m=l.amountTaxExpenses;return Object(a.createElement)("div",{className:"alignwide"+(t?" "+t:"")},Object(a.createElement)("table",{className:"table wp-block-table"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"index"},Object(c.__)("#","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"date"},Object(c.__)("Date","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"description"},Object(c.__)("Description","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"reference"},Object(c.__)("Reference","billy")),Object(a.createElement)("th",{scope:"col",className:"sort earnings","data-sort":"earning"},Object(c.__)("Earnings","billy")),Object(a.createElement)("th",{scope:"col",className:"sort expenses","data-sort":"expense"},Object(c.__)("Expenses","billy")),Object(a.createElement)("th",{scope:"col",className:"sort","data-sort":"tax"},Object(c.__)("Taxes","billy")))),Object(a.createElement)("tbody",{className:"list"},Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("tfoot",null,(s>0||i>0)&&Object(a.createElement)("tr",null,Object(a.createElement)("td",{colSpan:"5",className:"alignright"},Object(c.sprintf)(Object(c.__)("%1$s / %2$s","billy"),Object(c.__)("Earnings","billy"),Object(c.__)("Expenses","billy"))),Object(a.createElement)("td",{className:"sum earnings"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s,b))),Object(a.createElement)("td",{className:"sum expenses"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(i,b)))),(s>0||i>0)&&Object(a.createElement)("tr",null,Object(a.createElement)("td",{colSpan:"5",className:"alignright"},Object(c.__)("Profit","billy")),Object(a.createElement)("td",{colSpan:"2",className:"profit"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(s-i,b)))),(o>0||m>0)&&Object(a.createElement)("tr",null,Object(a.createElement)("td",{colSpan:"5",className:"alignright"},Object(c.sprintf)(Object(c.__)("%1$s (%2$s / %3$s)","billy"),Object(c.__)("Taxes","billy"),Object(c.__)("Earnings","billy"),Object(c.__)("Expenses","billy"))),Object(a.createElement)("td",{className:"sum tax-earnings"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(o,b))),Object(a.createElement)("td",{className:"sum tax-expenses"},Object(c.sprintf)(Object(c.__)("%1$s %2$s","billy"),n,u(m,b)))))))},deprecated:E}),Object(n.registerBlockType)("billy-blocks/accounting-tablerow",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Accounting","billy"),Object(c.__)("Table Row","billy")),icon:"menu-alt",category:"billy-blocks",parent:["billy-blocks/accounting-table"],attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},date:{type:"string",default:""},quarter:{type:"number",default:""},reference:{type:"string",default:""},earning:{type:"number",default:""},expense:{type:"number",default:""},tax:{type:"number",default:""},postUUID:{type:"string",default:""},postTitle:{type:"string",default:""},postLink:{type:"string",default:""},postType:{type:"string",default:""}},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:Object(o.withSelect)((function(e,t){var l=t.clientId,a=e("core/block-editor"),n=a.getBlockRootClientId,c=a.getBlockIndex;return{clientId:l,rootClientId:n(l),i:c(l,n(l))+1}}))((function(e){e.className;var t=e.clientId,l=e.rootClientId,n=e.i,s=e.attributes,i=s.index,u=s.currency,m=(s.locale,s.description),j=s.date,d=s.quarter,y=s.earning,p=s.expense,E=s.tax,f=s.reference,g=s.postUUID,x=s.postTitle,h=s.postLink,N=s.postType,v=e.setAttributes;return v({index:n}),v({currency:globalDataBilly.currency}),v({locale:globalDataBilly.locale}),""===j&&(v({date:(new Date).toISOString().substring(0,10)}),v({quarter:O((new Date).toISOString().substring(0,10))})),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.InspectorControls,null,!g&&Object(a.createElement)(b.PanelBody,{title:Object(c.__)("Date","billy")},Object(a.createElement)(b.DatePicker,{currentDate:j,onChange:function(e){v({date:e}),function(e){v({quarter:Number(O(e))})}(e),Object(o.dispatch)("core/block-editor").moveBlockToPosition(t,l,l,n)}})),g&&h&&Object(a.createElement)(b.PanelBody,{title:Object(c.sprintf)(Object(c.__)("Reference: %s","billy"),N?N.charAt(0).toUpperCase()+N.substring(1):Object(c.__)("Post","billy"))},Object(a.createElement)("p",null,Object(a.createElement)("a",{href:h},x||h)))),Object(a.createElement)("table",null,Object(a.createElement)("tbody",null,Object(a.createElement)("tr",null,Object(a.createElement)("th",{className:"index"},i&&i),Object(a.createElement)("td",{className:"date"},j&&new Date(j).toISOString().substring(0,10),Object(a.createElement)("sub",null,d&&Object(c.sprintf)(Object(c.__)("Q%s","billy"),d))),Object(a.createElement)("td",{className:"description",style:{minWidth:"200px"}},Object(a.createElement)(r.InnerBlocks,{template:[["core/paragraph",{placeholder:Object(c.__)("Add content","billy"),content:m||""}]],allowedBlocks:["core/heading","core/paragraph","core/list","core/html"]})),Object(a.createElement)("td",{className:"reference"},Object(a.createElement)(b.TextControl,{type:"text",label:Object(c.__)("Reference","billy"),placeholder:"",value:f,onChange:function(e){v({reference:e})}})),Object(a.createElement)("td",{className:"amount earning"},Object(a.createElement)(b.TextControl,{type:"number",label:Object(c.sprintf)(Object(c.__)("%1$s in %2$s","billy"),Object(c.__)("Earning","billy"),u),placeholder:Object(c.__)("0","billy"),value:y,onChange:function(e){v({expense:""}),v({earning:e>0?Number(e):""}),_()}})),Object(a.createElement)("td",{className:"amount expense"},Object(a.createElement)(b.TextControl,{type:"number",label:Object(c.sprintf)(Object(c.__)("%1$s in %2$s","billy"),Object(c.__)("Expense","billy"),u),placeholder:Object(c.__)("0","billy"),value:p,onChange:function(e){v({earning:""}),v({expense:e>0?Number(e):""}),_()}})),Object(a.createElement)("td",{className:"amount tax"},Object(a.createElement)(b.TextControl,{type:"number",label:Object(c.sprintf)(Object(c.__)("%1$s in %2$s","billy"),Object(c.__)("Tax","billy"),u),placeholder:Object(c.__)("0","billy"),value:E,onChange:function(e){v({tax:e>0?Number(e):""}),_()}}))))))})),save:function(e){e.className;var t=e.attributes,l=t.index,n=t.locale,b=t.date,s=t.quarter,i=t.earning,o=t.expense,m=t.tax,O=t.reference,j=t.postLink;return Object(a.createElement)("tr",{"data-date":b&&new Date(b).toISOString().substring(0,10),"data-quarter":s&&Object(c.sprintf)(Object(c.__)("Q%s","billy"),s),"data-reference":O&&O,"data-earning":i>0?i:null,"data-expense":o>0?o:null,"data-tax":m>0?m:null},Object(a.createElement)("th",{className:"index",scope:"row"},l&&l),Object(a.createElement)("td",{className:"date","data-value":b&&new Date(b).toISOString().substring(0,10)},b&&new Date(b).toISOString().substring(0,10),Object(a.createElement)("sub",null,s&&Object(c.sprintf)(Object(c.__)("Q%s","billy"),s))),Object(a.createElement)("td",{className:"description"},Object(a.createElement)(r.InnerBlocks.Content,null)),Object(a.createElement)("td",{className:"reference"},O&&!j&&O,O&&j&&Object(a.createElement)("a",{href:j},O)),Object(a.createElement)("td",{className:"amount earning","data-value":i>0?i:null},i&&i>0&&u(i,n)),Object(a.createElement)("td",{className:"amount expense","data-value":o>0?o:null},o&&o>0&&u(o,n)),Object(a.createElement)("td",{className:"amount tax","data-value":m>0?m:null},m&&m>0&&u(m,n)))},deprecated:f}),Object(n.registerBlockType)("billy-blocks/accounting-actions",{title:Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Accounting","billy"),Object(c.__)("Actions","billy")),icon:"menu-alt",category:"billy-blocks",supports:{inserter:!1,reusable:!1,html:!1},getEditWrapperProps:function(){return{"data-align":"wide"}},edit:Object(o.withSelect)((function(e){return{postModifiedDate:e("core/editor").getEditedPostAttribute("modified")}}))((function(e){var t=e.postModifiedDate;return Object(a.createElement)("div",{className:"components-placeholder",style:{minHeight:"auto"}},Object(a.createElement)("small",null,Object(c.sprintf)(Object(c.__)("%1$s: %2$s","billy"),Object(c.__)("Last modified","billy"),new Date(t).toLocaleString())))})),save:function(e){return null}})}]);