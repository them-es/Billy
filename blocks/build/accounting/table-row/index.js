(()=>{"use strict";const e=window.wp.i18n,t=window.wp.blocks,n=window.wp.blockEditor,a=window.wp.components,l=window.wp.data,s=window.wp.element,r=(e,t=void 0)=>e.toLocaleString(t,{minimumFractionDigits:2,maximumFractionDigits:2}),i=e=>{const t=new Date(e)||new Date;return[1,2,3,4][Math.floor(t.getMonth()/3)]},d=window.ReactJSXRuntime,c=[{attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},date:{type:"string",default:""},quarter:{type:"number",default:""},reference:{type:"string",default:""},earning:{type:"number",default:""},expense:{type:"number",default:""},tax:{type:"number",default:""},postUUID:{type:"string",default:""},postTitle:{type:"string",default:""},postLink:{type:"string",default:""},postType:{type:"string",default:""}},save:t=>{const{className:a,attributes:{index:l,locale:s,date:i,quarter:c,earning:u,expense:o,tax:p,reference:x,postLink:g}}=t;return(0,d.jsxs)("tr",{"data-date":i&&new Date(i).toISOString().substring(0,10),"data-quarter":c&&(0,e.sprintf)((0,e.__)("Q%s","billy"),c),"data-reference":x&&x,"data-earning":u>0?u:null,"data-expense":o>0?o:null,"data-tax":p>0?p:null,children:[(0,d.jsx)("th",{className:"index",scope:"row",children:l&&l}),(0,d.jsxs)("td",{className:"date","data-value":i&&new Date(i).toISOString().substring(0,10),children:[i&&new Date(i).toISOString().substring(0,10),(0,d.jsx)("sub",{children:c&&(0,e.sprintf)((0,e.__)("Q%s","billy"),c)})]}),(0,d.jsx)("td",{className:"description",children:(0,d.jsx)(n.InnerBlocks.Content,{})}),(0,d.jsxs)("td",{className:"reference",children:[x&&!g&&x,x&&g&&(0,d.jsx)("a",{href:g,children:x})]}),(0,d.jsx)("td",{className:"amount earning","data-value":u>0?u:null,children:u&&u>0&&r(u,s)}),(0,d.jsx)("td",{className:"amount expense","data-value":o>0?o:null,children:o&&o>0&&r(o,s)}),p&&p>0&&(0,d.jsx)("td",{className:"amount tax","data-value":p,children:r(p,s)})]})}},{attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},date:{type:"string",default:""},quarter:{type:"number",default:""},reference:{type:"string",default:""},earning:{type:"number",default:""},expense:{type:"number",default:""},tax:{type:"number",default:""},postUUID:{type:"string",default:""},postTitle:{type:"string",default:""},postLink:{type:"string",default:""},postType:{type:"string",default:""}},save:t=>{const{className:a,attributes:{index:l,locale:s,date:i,quarter:c,earning:u,expense:o,tax:p,reference:x,postLink:g}}=t;return(0,d.jsxs)("tr",{"data-date":i&&new Date(i).toISOString().substring(0,10),"data-quarter":c&&(0,e.sprintf)((0,e.__)("Q%s","billy"),c),"data-reference":x&&x,"data-earning":u>0?u:null,"data-expense":o>0?o:null,"data-tax":p>0?p:null,children:[(0,d.jsx)("th",{className:"index",scope:"row",children:l&&l}),(0,d.jsxs)("td",{className:"date","data-value":i&&new Date(i).toISOString().substring(0,10),children:[i&&new Date(i).toISOString().substring(0,10),(0,d.jsx)("sub",{children:c&&(0,e.sprintf)((0,e.__)("Q%s","billy"),c)})]}),(0,d.jsx)("td",{className:"description",children:(0,d.jsx)(n.InnerBlocks.Content,{})}),(0,d.jsxs)("td",{className:"reference",children:[x&&!g&&x,x&&g&&(0,d.jsx)("a",{href:g,children:x})]}),(0,d.jsx)("td",{className:"amount earning","data-value":u>0?u:null,children:u&&u>0&&r(u,s)}),(0,d.jsx)("td",{className:"amount expense","data-value":o>0?o:null,children:o&&o>0&&r(o,s)}),(0,d.jsx)("td",{className:"amount tax","data-value":p>0?p:null,children:p&&p>0&&r(p,s)})]})}},{attributes:{index:{type:"number",default:"0"},currency:{type:"string",default:""},locale:{type:"string",default:""},date:{type:"string",default:""},quarter:{type:"number",default:""},reference:{type:"string",default:""},description:{type:"string",default:""},earning:{type:"number",default:""},expense:{type:"number",default:""},tax:{type:"number",default:""},postUUID:{type:"string",default:""},postTitle:{type:"string",default:""},postLink:{type:"string",default:""},postType:{type:"string",default:""}},save:t=>{const{className:n,attributes:{index:a,locale:l,date:s,quarter:i,description:c,earning:u,expense:o,tax:p,reference:x,postLink:g}}=t;return(0,d.jsxs)("tr",{"data-date":s&&new Date(s).toISOString().substring(0,10),"data-quarter":i&&(0,e.sprintf)((0,e.__)("Q%s","billy"),i),"data-reference":x&&x,"data-earning":u>0?u:null,"data-expense":o>0?o:null,"data-tax":p>0?p:null,children:[(0,d.jsx)("th",{className:"index",scope:"row",children:a&&a}),(0,d.jsxs)("td",{className:"date","data-value":s&&new Date(s).toISOString().substring(0,10),children:[s&&new Date(s).toISOString().substring(0,10),(0,d.jsx)("sub",{children:i&&(0,e.sprintf)((0,e.__)("Q%s","billy"),i)})]}),(0,d.jsx)("td",{className:"description",children:c&&c}),(0,d.jsxs)("td",{className:"reference",children:[x&&!g&&x,x&&g&&(0,d.jsx)("a",{href:g,children:x})]}),(0,d.jsx)("td",{className:"amount earning","data-value":u>0?u:null,children:u&&u>0&&r(u,l)}),(0,d.jsx)("td",{className:"amount expense","data-value":o>0?o:null,children:o&&o>0&&r(o,l)}),(0,d.jsx)("td",{className:"amount tax","data-value":p>0?p:null,children:p&&p>0&&r(p,l)})]})}}],u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"billy-blocks/accounting-tablerow","title":"Accounting: Table Row","icon":"menu-alt","category":"billy-blocks","parent":["billy-blocks/accounting-table"],"textdomain":"billy","attributes":{"index":{"type":"number","default":"0"},"currency":{"type":"string","default":""},"locale":{"type":"string","default":""},"date":{"type":"string","default":""},"quarter":{"type":"number","default":""},"reference":{"type":"string","default":""},"earning":{"type":"number","default":""},"expense":{"type":"number","default":""},"tax":{"type":"number","default":""},"postUUID":{"type":"string","default":""},"postTitle":{"type":"string","default":""},"postLink":{"type":"string","default":""},"postType":{"type":"string","default":""}},"supports":{"inserter":false,"reusable":false,"html":false},"editorScript":"file:./index.js"}'),{name:o}=u;(0,t.registerBlockType)({name:o,...u},{getEditWrapperProps:()=>({"data-align":"wide"}),edit:function({clientId:t,attributes:{index:r,currency:c,locale:u,description:o,date:p,quarter:x,earning:g,expense:b,tax:y,reference:f,postUUID:m,postTitle:h,postLink:j,postType:w},setAttributes:_}){const N=(0,n.useBlockProps)(),S=(0,l.useSelect)(e=>{const{getBlockRootClientId:n,getBlockIndex:a}=e("core/block-editor");return{clientId:t,rootClientId:n(t),i:a(t,n(t))+1}},[t]);return(0,s.useEffect)(()=>{_({index:S.i,currency:globalDataBilly.currency,locale:globalDataBilly.locale}),""===p&&_({date:(new Date).toISOString().substring(0,10),quarter:i((new Date).toISOString().substring(0,10))})},[S,p]),(0,d.jsxs)("div",{...N,children:[(0,d.jsxs)(n.InspectorControls,{children:[!m&&(0,d.jsx)(a.PanelBody,{title:(0,e.__)("Date","billy"),children:(0,d.jsx)(a.DatePicker,{currentDate:p,onChange:e=>{_({date:e}),(e=>{_({quarter:Number(i(e))})})(e),(0,l.dispatch)("core/block-editor").moveBlockToPosition(S.clientId,S.rootClientId,S.rootClientId,S.i)}})}),m&&j&&(0,d.jsx)(a.PanelBody,{title:(0,e.sprintf)((0,e.__)("Reference: %s","billy"),w?w.charAt(0).toUpperCase()+w.substring(1):(0,e.__)("Post","billy")),children:(0,d.jsx)("p",{children:(0,d.jsx)("a",{href:j,children:h||j})})})]}),(0,d.jsx)("table",{children:(0,d.jsx)("tbody",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"index",children:r&&r}),(0,d.jsxs)("td",{className:"date",children:[p&&new Date(p).toISOString().substring(0,10),(0,d.jsx)("sub",{children:x&&(0,e.sprintf)((0,e.__)("Q%s","billy"),x)})]}),(0,d.jsx)("td",{className:"description",style:{minWidth:"200px"},children:(0,d.jsx)(n.InnerBlocks,{template:[["core/paragraph",{content:o||""}]],allowedBlocks:["core/block","core/heading","core/paragraph","core/list","core/html"]})}),(0,d.jsx)("td",{className:"reference",children:(0,d.jsx)(a.TextControl,{type:"text",label:(0,e.__)("Reference","billy"),placeholder:"",value:null!=f?f:"",onChange:e=>{_({reference:e})}})}),(0,d.jsx)("td",{className:"amount earning",children:(0,d.jsx)(a.TextControl,{type:"number",label:(0,e.sprintf)((0,e.__)("%1$s in %2$s","billy"),(0,e.__)("Earning","billy"),c),placeholder:(0,e.__)("0","billy"),value:null!=g?g:"",onChange:e=>{_({expense:"",earning:e>0?Number(e):""})}})}),(0,d.jsx)("td",{className:"amount expense",children:(0,d.jsx)(a.TextControl,{type:"number",label:(0,e.sprintf)((0,e.__)("%1$s in %2$s","billy"),(0,e.__)("Expense","billy"),c),placeholder:(0,e.__)("0","billy"),value:null!=b?b:"",onChange:e=>{_({earning:"",expense:e>0?Number(e):""})}})}),(0,d.jsx)("td",{className:"amount tax",children:(0,d.jsx)(a.TextControl,{type:"number",label:(0,e.sprintf)((0,e.__)("%1$s in %2$s","billy"),(0,e.__)("Tax","billy"),c),placeholder:(0,e.__)("0","billy"),value:null!=y?y:"",onChange:e=>{_({tax:e>0?Number(e):""})}})})]})})})]})},save:function({attributes:{index:t,locale:a,date:l,quarter:s,earning:i,expense:c,tax:u,reference:o,postLink:p}}){return(0,d.jsxs)("tr",{"data-date":l&&new Date(l).toISOString().substring(0,10),"data-quarter":s&&(0,e.sprintf)((0,e.__)("Q%s","billy"),s),"data-reference":o&&o,"data-earning":i>0?i:null,"data-expense":c>0?c:null,"data-tax":u>0?u:null,children:[(0,d.jsx)("th",{className:"index",scope:"row",children:t&&t}),(0,d.jsxs)("td",{className:"date","data-value":l&&new Date(l).toISOString().substring(0,10),children:[l&&new Date(l).toISOString().substring(0,10),(0,d.jsx)("sub",{children:s&&(0,e.sprintf)((0,e.__)("Q%s","billy"),s)})]}),(0,d.jsx)("td",{className:"description",children:(0,d.jsx)(n.InnerBlocks.Content,{})}),(0,d.jsxs)("td",{className:"reference",children:[o&&!p&&o,o&&p&&(0,d.jsx)("a",{href:p,children:o})]}),(0,d.jsx)("td",{className:"amount earning","data-value":i>0?i:null,children:i&&i>0&&r(i,a)}),(0,d.jsx)("td",{className:"amount expense","data-value":c>0?c:null,children:c&&c>0&&r(c,a)}),u&&u>0&&(0,d.jsx)("td",{className:"amount tax","data-value":u,children:r(u,a)})]})},deprecated:c})})();